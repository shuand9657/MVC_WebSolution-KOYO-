/*
* Kendo UI v2015.3.1214 (http://www.telerik.com/kendo-ui)
* Copyright 2015 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at
* http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
* If you do not own a commercial license, this file shall be governed by the trial license terms.
*/
!function(e,define){define(["./kendo.data.min","./kendo.columnsorter.min","./kendo.editable.min","./kendo.window.min","./kendo.filtermenu.min","./kendo.columnmenu.min","./kendo.groupable.min","./kendo.pager.min","./kendo.selectable.min","./kendo.sortable.min","./kendo.reorderable.min","./kendo.resizable.min","./kendo.mobile.actionsheet.min","./kendo.mobile.pane.min","./kendo.ooxml.min","./kendo.excel.min","./kendo.progressbar.min","./kendo.pdf.min"],e)}(function(){return function(e,t){function n(e){return Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function i(e){var t,n=" ";if(e){if(typeof e===ct)return e;for(t in e)n+=t+'="'+e[t]+'"'}return n}function o(t,n){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",n)}function r(t,n,i,o,r){var s,a=n;for(n=e(),r=r||1,s=0;r>s;s++)n=n.add(t.eq(a+s));"number"==typeof i?n[o?"insertBefore":"insertAfter"](t.eq(i)):n.appendTo(i)}function s(t,n,i){return e(t).add(n).find(i)}function a(e,t,n){var i,o,r,s;for(n=xe(n)?n:[n],i=0,o=n.length;o>i;i++)r=n[i],_e(r)&&r.click&&(s=r.name||r.text,t.on(rt+Fe,"a.k-grid-"+(s||"").replace(/\s/g,""),{commandName:s},Se(r.click,e)))}function l(e,t,n){return be(e,function(e){var i,o;return e=typeof e===ct?{field:e}:e,(!f(e)||n)&&(e.attributes=W(e.attributes),e.footerAttributes=W(e.footerAttributes),e.headerAttributes=W(e.headerAttributes),i=!0),e.columns&&(e.columns=l(e.columns,t,i)),o=ue.guid(),e.headerAttributes=we({id:o},e.headerAttributes),we({encoded:t,hidden:i},e)})}function c(e,t){var n=[];return h(e,t,n),n[n.length-1]}function h(e,t,n){var i,o;for(n=n||[],i=0;t.length>i;i++){if(e===t[i])return!0;if(t[i].columns){if(o=n.length,n.push(t[i]),h(e,t[i].columns,n))return!0;n.splice(o,n.length-o)}}return!1}function u(e,t){var n=t?j:W;e.hidden=!t,e.attributes=n(e.attributes),e.footerAttributes=n(e.footerAttributes),e.headerAttributes=n(e.headerAttributes)}function d(){return"none"!==this.style.display}function f(e){return p([e]).length>0}function p(e){return ye(e,function(e){var t=!e.hidden;return t&&e.columns&&(t=p(e.columns).length>0),t})}function g(t){return e(t).map(function(){return this.toArray()})}function m(e,t,n){var i=w(R(t)),o=w(B(t)),r=e.rowSpan;e.rowSpan=n?i>o?r-(i-o)||1:r+(o-i):i>o?r+(i-o):r-(o-i)||1}function v(t,n,i,o,r,s,a){var l,c,h=w(t),u=w([n]);h>u&&(l=Array(a+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>'),c=s.children(":not(.k-filter-row)"),e(Array(h-u+1).join("<tr>"+l+"</tr>")).insertAfter(c.last())),E(s,h-u),b(i,o,r,s)}function _(t,n,i){var o,r,s,a,l,c,h,u;for(i=i||0,s=n,n=O(n),a={},l=t.find(">tr:not(.k-filter-row)"),c=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},h=0,u=n.length;u>h;h++)o=y(n[h],s),a[o.row]||(a[o.row]=l.eq(o.row).find(".k-header").filter(c)),r=a[o.row].eq(o.cell),r.attr(ue.attr("index"),i+h);return n.length}function w(e){var t,n,i=1,o=0;for(t=0;e.length>t;t++)e[t].columns&&(n=w(e[t].columns),n>o&&(o=n));return i+o}function b(t,n,i,o){var r,s,a=C(t[0],n),l=i.find(">tr:not(.k-filter-row):eq("+a.row+")>th.k-header"),c=e(),h=a.cell;for(r=0;t.length>r;r++)c=c.add(l.eq(h+r));for(o.find(">tr:not(.k-filter-row)").eq(a.row).append(c),s=[],r=0;t.length>r;r++)t[r].columns&&(s=s.concat(t[r].columns));s.length&&b(s,n,i,o)}function y(e,t,n,i){var o,r;for(n=n||0,i=i||{},i[n]=i[n]||0,r=0;t.length>r;r++){if(t[r]==e){o={cell:i[n],row:n};break}if(t[r].columns&&(o=y(e,t[r].columns,n+1,i)))break;i[n]++}return o}function x(e,t,n,i){var o,r=n.locked;do o=e[t],t+=i?1:-1;while(o&&t>-1&&e.length>t&&o!=n&&!o.columns&&o.locked==r);return o}function k(e,t,n,i){var o,r,s,a;return t.columns?(t=t.columns,t[i?0:t.length-1]):(o=c(t,e),r=o?o.columns:e,s=ke(t,r),0===s&&i?s++:s!=r.length-1||i?(s>0||0===s&&!i)&&(s+=i?-1:1):s--,a=ke(n,r),t=x(r,s,n,a>s),t&&t!=n&&t.columns?k(e,t,n,i):null)}function C(e,t,n,i){var o,r;for(n=n||0,i=i||{},i[n]=i[n]||0,r=0;t.length>r;r++){if(t[r]==e){o={cell:i[n],row:n};break}if(t[r].columns&&(o=C(e,t[r].columns,n+1,i)))break;t[r].hidden||i[n]++}return o}function S(e){var t=T(R(e));return t.concat(T(B(e)))}function T(e){var t,n=[],i=[];for(t=0;e.length>t;t++)n.push(e[t]),e[t].columns&&(i=i.concat(e[t].columns));return i.length&&(n=n.concat(T(i))),n}function D(e){var t,n,i=0;for(n=0;e.length>n;n++)t=e[n],t.columns?i+=D(t.columns):t.hidden&&i++;return i}function A(e){var t,n,i,o=0;for(n=0,i=e.length;i>n;n++)t=e[n].style.width,t&&-1==t.indexOf("%")&&(o+=parseInt(t,10));return o}function M(e,t){var n,i,o=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(i=0;o.length>i;i++)n=o[i].rowSpan,n>1&&(o[i].rowSpan=n-t||1)}function E(e,t){var n,i=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(n=0;i.length>n;n++)i[n].rowSpan+=t}function P(t){var n,i=t.find("tr:not(.k-filter-row)"),o=i.filter(function(){return!e(this).children().length}).remove().length,r=i.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(n=0;r.length>n;n++)r[n].rowSpan>1&&(r[n].rowSpan-=o);return i.length-o}function I(e,t,n,i,o){var r,s,a,l=[];for(r=0,a=e.length;a>r;r++)s=n[i]||[],s.push(t.eq(o+r)),n[i]=s,e[r].columns&&(l=l.concat(e[r].columns));l.length&&I(l,t,n,i+1,o+e.length)}function R(e){return ye(e,function(e){return e.locked})}function B(e){return ye(e,function(e){return!e.locked})}function z(e){return ye(e,function(e){return!e.locked&&f(e)})}function L(e){return ye(e,function(e){return e.locked&&f(e)})}function F(e){var t,n=[];for(t=0;e.length>t;t++)e[t].hidden||(e[t].columns?n=n.concat(F(e[t].columns)):n.push(e[t]));return n}function O(e){var t,n=[];for(t=0;e.length>t;t++)e[t].columns?n=n.concat(O(e[t].columns)):n.push(e[t]);return n}function N(n){var i,o=n.find(">tr:not(.k-filter-row)"),r=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},s=e();return o.length>1&&(s=o.find("th").filter(r).filter(function(){return this.rowSpan>1})),s=s.add(o.last().find("th").filter(r)),i=ue.attr("index"),s.sort(function(n,o){var r,s;return n=e(n),o=e(o),r=n.attr(i),s=o.attr(i),r===t&&(r=e(n).index()),s===t&&(s=e(o).index()),r=parseInt(r,10),s=parseInt(s,10),r>s?1:s>r?-1:0}),s}function H(t){var n,i,o,r,s,a,l,c=t.closest("table"),h=e().add(t),u=t.closest("tr"),d=c.find("tr:not(.k-filter-row)"),f=d.index(u);if(f>0){for(n=d.eq(f-1),i=n.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!e(this).attr("rowspan")}),o=0,r=u.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),s=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1}),a=0;s.length>a;a++)o+=s[a].colSpan||1;for(r+=Math.max(o-1,0),o=0,a=0;i.length>a;a++)if(l=i.eq(a),o+=l.attr("colSpan")?l[0].colSpan:1,r>=a&&o>r){h=H(l).add(h);break}}return h}function V(t){var n,i,o,r,s,a,l,c=t.closest("thead"),h=e().add(t),u=t.closest("tr"),d=c.find("tr:not(.k-filter-row)"),f=d.index(u)+t[0].rowSpan,p=ue.attr("colspan");if(d.length-1>=f){for(n=u.next(),i=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)"),i=i.filter(function(){return!this.rowSpan||1===this.rowSpan}),r=0,o=0;i.length>o;o++)r+=parseInt(i.eq(o).attr(p),10)||1;for(s=n.find("th:not(.k-group-cell,.k-hierarchy-cell)"),a=parseInt(t.attr(p),10)||1,o=0;a>o;)n=s.eq(o+r),h=h.add(V(n)),l=parseInt(n.attr(p),10),l>1&&(a-=l-1),o++}return h}function U(t,n,i,o){var r,s=t;return o&&t.empty(),pe?t[0].innerHTML=i:(r=document.createElement("div"),r.innerHTML="<table><tbody>"+i+"</tbody></table>",t=r.firstChild.firstChild,n[0].replaceChild(t,s[0]),t=e(t)),t}function W(e){e=e||{};var t=e.style;return t?(t=t.replace(/((.*)?display)(.*)?:([^;]*)/i,"$1:none"),t===e.style&&(t=t.replace(/(.*)?/i,"display:none;$1"))):t="display:none",we({},e,{style:t})}function j(e){e=e||{};var t=e.style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function G(t,n,i,o){var r,s=t.find(">colgroup"),a=be(n,function(e){return r=e.width,r&&0!==parseInt(r,10)?ue.format('<col style="width:{0}"/>',typeof r===ct?r:r+"px"):"<col />"});(i||s.find(".k-hierarchy-col").length)&&a.splice(0,0,'<col class="k-hierarchy-col" />'),s.length&&s.remove(),s=e(Array(o+1).join('<col class="k-group-col">')+a.join("")),s.is("colgroup")||(s=e("<colgroup/>").append(s)),t.prepend(s),yt.msie&&8==yt.version&&(t.css("display","inline-table"),window.setTimeout(function(){t.css("display","")},1))}function q(e,t){var n,i,o=0,r=e.find("th:not(.k-group-cell)");for(n=0,i=t.length;i>n;n++)t[n].locked&&(r.eq(n).insertBefore(r.eq(o)),r=e.find("th:not(.k-group-cell)"),o++)}function $(e){var t,n,i,o={};for(n=0,i=e.length;i>n;n++)t=e[n],o[t.value]=t.text;return o}function Y(e,t,n,i){var o=n&&n.length&&_e(n[0])&&"value"in n[0],r=o?$(n)[e]:e;return r=null!=r?r:"",t?ue.format(t,r):i===!1?r:ue.htmlEncode(r)}function Q(e,t,n){for(var i,o=0,r=e[o];r;){if(i=n?!0:"none"!==r.style.display,i&&!vt.test(r.className)&&--t<0){r.style.display=n?"":"none";break}r=e[++o]}}function K(t,n){for(var i,o,r=0,s=t.length;s>r;r+=1)o=t.eq(r),o.is(".k-grouping-row,.k-detail-row")?(i=o.children(":not(.k-group-cell):first,.k-detail-cell").last(),i.attr("colspan",parseInt(i.attr("colspan"),10)-1)):(o.hasClass("k-grid-edit-row")&&(i=o.children(".k-edit-container")[0])&&(i=e(i),i.attr("colspan",parseInt(i.attr("colspan"),10)-1),i.find("col").eq(n).remove(),o=i.find("tr:first")),Q(o[0].cells,n,!1))}function X(e){var t,n,i=[];for(n=0;e.length>n&&(t=e[n],"field"in t&&"value"in t&&"items"in t);n++)i.push(t),t.hasSubgroups&&(i=i.concat(X(t.items)));return i}function Z(e){var t,n,i=[];for(n=0;e.length>n&&(t=e[n],"field"in t&&"value"in t&&"items"in t);n++)t.hasSubgroups&&(i=i.concat(Z(t.items))),i.push(t.aggregates);return i}function J(t,n){for(var i,o,r,s=0,a=t.length;a>s;s+=1)o=t.eq(s),o.is(".k-grouping-row,.k-detail-row")?(i=o.children(":not(.k-group-cell):first,.k-detail-cell").last(),i.attr("colspan",parseInt(i.attr("colspan"),10)+1)):(o.hasClass("k-grid-edit-row")&&(i=o.children(".k-edit-container")[0])&&(i=e(i),i.attr("colspan",parseInt(i.attr("colspan"),10)+1),G(i.find(">form>table"),p(r),!1,0),o=i.find("tr:first")),Q(o[0].cells,n,!0))}function ee(e,t,n){n=n||1;var i,o,r;for(o=0,r=e.length;r>o;o++)i=e.eq(o).children().last(),i.attr("colspan",parseInt(i.attr("colspan"),10)+n),i=t.eq(o).children().last(),i.attr("colspan",parseInt(i.attr("colspan"),10)-n)}function te(e){var t,n,i=0,o=e.find(">colgroup>col");for(t=0,n=o.length;n>t;t+=1)i+=parseInt(o[t].style.width,10);return i}function ne(e,t){var n,i,o,r;e=e[0],t=t[0],e.rows.length!==t.rows.length&&(n=e.offsetHeight,i=t.offsetHeight,n>i?(o=t.rows[t.rows.length-1],_t.test(o.className)&&(o=t.rows[t.rows.length-2]),r=n-i):(o=e.rows[e.rows.length-1],_t.test(o.className)&&(o=e.rows[e.rows.length-2]),r=i-n),o.style.height=o.offsetHeight+r+"px")}function ie(e,t){var n,i=e.offsetHeight,o=t.offsetHeight;i>o?n=i+"px":o>i&&(n=o+"px"),n&&(e.style.height=t.style.height=n)}function oe(e,t){var n,i,o;if(typeof e===ct&&e===t)return e;if(_e(e)&&e.name===t)return e;if(xe(e))for(n=0,i=e.length;i>n;n++)if(o=e[n],typeof o===ct&&o===t||o.name===t)return o;return null}function re(t,n){var i,o,r,s=yt.msie;if(n===!0){if(t=e(t),i=!0,i&&(o=t.parent().scrollTop(),r=t.parent().scrollLeft()),s)try{t[0].setActive()}catch(a){t[0].focus()}else t[0].focus();i&&(t.parent().scrollTop(o),t.parent().scrollLeft(r))}else e(t).one("focusin",function(e){e.preventDefault()}).focus()}function se(t){return e(t).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon")}function ae(n){var i=e(n.currentTarget),o=i.is("th"),r=this.table.add(this.lockedTable),s=this.thead.parent().add(e(">table",this.lockedHeader)),a=se(n.target),l=i.closest("table")[0];if(!ue.support.touch)return a&&i.find(ue.roleSelector("filtercell")).length?(this._setCurrent(i),t):((l===r[0]||l===r[1]||l===s[0]||l===s[1])&&(e(n.target).is("a.k-i-collapse, a.k-i-expand")||(this.options.navigatable&&this._setCurrent(i),(o||!a)&&setTimeout(function(){kt&&e(ue._activeElement()).hasClass("k-widget")||se(ue._activeElement())||re(l,!0)}),o&&n.preventDefault())),t)}function le(e){return e&&(e.hasClass("k-edit-cell")||e.parent().hasClass("k-grid-edit-row"))}function ce(e,t,i){return'<tr role="row" class="k-grouping-row">'+n(t)+'<td colspan="'+e+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1"></a>'+i+"</p></td></tr>"}function he(e){return'<tr role="row" class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}var ue=window.kendo,de=ue.ui,fe=ue.data.DataSource,pe=ue.support.tbodyInnerHtml,ge=ue._activeElement,me=de.Widget,ve=ue.keys,_e=e.isPlainObject,we=e.extend,be=e.map,ye=e.grep,xe=e.isArray,ke=e.inArray,Ce=Array.prototype.push,Se=e.proxy,Te=ue.isFunction,De=e.isEmptyObject,Ae=Math,Me="progress",Ee="error",Pe=":not(.k-group-cell):not(.k-hierarchy-cell):visible",Ie="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",Re="tr:not(.k-footer-template):visible",Be=":not(.k-group-cell):not(.k-hierarchy-cell):visible",ze=Re+":first>"+Be+":first",Le="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",Fe=".kendoGrid",Oe="edit",Ne="save",He="remove",Ve="detailInit",Ue="filterMenuInit",We="columnMenuInit",je="change",Ge="columnHide",qe="columnShow",$e="saveChanges",Ye="dataBound",Qe="detailExpand",Ke="detailCollapse",Xe="k-state-focused",Ze="k-state-selected",Je="k-grid-norecords",et="columnResize",tt="columnReorder",nt="columnLock",it="columnUnlock",ot="navigate",rt="click",st="height",at="tabIndex",lt="function",ct="string",ht="Are you sure you want to delete this record?",ut="No records available.",dt="Delete",ft="Cancel",pt=/(\}|\#)/gi,gt=/#/gi,mt="[\\x20\\t\\r\\n\\f]",vt=RegExp("(^|"+mt+")(k-group-cell|k-hierarchy-cell)("+mt+"|$)"),_t=RegExp("(^|"+mt+")(k-filter-row)("+mt+"|$)"),wt='<a class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass# #=imageClass#"></span>#=text#</a>',bt=!1,yt=ue.support.browser,xt=yt.msie&&7==yt.version,kt=yt.msie&&8==yt.version,Ct=me.extend({init:function(e,t){var n=this;me.fn.init.call(n,e,t),n._refreshHandler=Se(n.refresh,n),n.setDataSource(t.dataSource),n.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(je,t._refreshHandler),t.dataSource=e,t.dataSource.bind(je,t._refreshHandler)},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0},destroy:function(){var e=this;me.fn.destroy.call(e),e.dataSource.unbind(je,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(Fe),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,n=this,i=ue.support.scrollbar()+1,o=n.element;o.css({width:"auto",overflow:"hidden"}).css(bt?"padding-left":"padding-right",i),n.content=o.children().first(),t=n.wrapper=n.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+Fe+" mousewheel"+Fe,Se(n._wheelScroll,n)),ue.support.kineticScrollNeeded&&(n.drag=new ue.UserEvents(n.wrapper,{global:!0,start:function(e){e.sender.capture()},move:function(e){n.verticalScrollbar.scrollTop(n.verticalScrollbar.scrollTop()-e.y.delta),t.scrollLeft(t.scrollLeft()-e.x.delta),e.preventDefault()}})),n.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:i}).appendTo(o).bind("scroll"+Fe,Se(n._scroll,n))},_wheelScroll:function(t){if(!t.ctrlKey){var n=this.verticalScrollbar,i=n.scrollTop(),o=ue.wheelDeltaY(t);!o||o>0&&0===i||0>o&&i+n[0].clientHeight==n[0].scrollHeight||(t.preventDefault(),e(t.currentTarget).one("wheel"+Fe,!1),this.verticalScrollbar.scrollTop(i+-o))}},_scroll:function(e){var t=this,n=!t.options.prefetch,i=e.currentTarget.scrollTop,o=t.dataSource,r=t.itemHeight,s=o.skip()||0,a=t._rangeStart||s,l=t.element.innerHeight(),c=!!(t._scrollbarTop&&t._scrollbarTop>i),h=Ae.max(Ae.floor(i/r),0),u=Ae.max(h+Ae.floor(l/r),0);t._scrollTop=i-a*r,t._scrollbarTop=i,t._scrolling=n,t._fetch(h,u,c)||(t.wrapper[0].scrollTop=t._scrollTop),n&&(t._scrollingTimeout&&clearTimeout(t._scrollingTimeout),t._scrollingTimeout=setTimeout(function(){t._scrolling=!1,t._page(t._rangeStart,t.dataSource.take())},100))},itemIndex:function(e){var t=this._rangeStart||this.dataSource.skip()||0;return t+e},position:function(e){var t,n=this._rangeStart||this.dataSource.skip()||0,i=this.dataSource.pageSize();return t=e>n?e-n+1:n-e-1,t>i?i:t},scrollIntoView:function(e){var t=this.wrapper[0],n=t.clientHeight,i=this._scrollTop||t.scrollTop,o=e[0].offsetTop,r=e[0].offsetHeight;i>o?this.verticalScrollbar[0].scrollTop-=n/2:o+r>=i+n&&(this.verticalScrollbar[0].scrollTop+=n/2)},_fetch:function(t,n,i){var o=this,r=o.dataSource,s=o.itemHeight,a=r.take(),l=o._rangeStart||r.skip()||0,c=Ae.floor(t/a)*a,h=!1,u=.33;return l>t?(h=!0,l=Ae.max(0,n-a),o._scrollTop=(t-l)*s,o._page(l,a)):n>=l+a&&!i?(h=!0,l=t,o._scrollTop=s,o._page(l,a)):!o._fetching&&o.options.prefetch&&(c+a-a*u>t&&t>a&&r.prefetch(c-a,a,e.noop),n>c+a*u&&r.prefetch(c+a,a,e.noop)),h},fetching:function(){return this._fetching},_page:function(e,t){var n=this,i=!n.options.prefetch,o=n.dataSource;clearTimeout(n._timeout),n._fetching=!0,n._rangeStart=e,o.inRange(e,t)?o.range(e,t):(i||ue.ui.progress(n.wrapper.parent(),!0),n._timeout=setTimeout(function(){n._scrolling||(i&&ue.ui.progress(n.wrapper.parent(),!0),o.range(e,t))},100))},repaintScrollbar:function(){var e,t=this,n="",i=25e4,o=t.dataSource,r=ue.support.kineticScrollNeeded?0:ue.support.scrollbar(),s=t.wrapper[0],a=t.itemHeight=t.options.itemHeight()||0,l=s.scrollWidth>s.offsetWidth?r:0,c=o.total()*a+l;for(e=0;e<Ae.floor(c/i);e++)n+='<div style="width:1px;height:'+i+'px"></div>';c%i&&(n+='<div style="width:1px;height:'+c%i+'px"></div>'),t.verticalScrollbar.html(n),s.scrollTop=t._scrollTop},refresh:function(){var e=this,t=e.dataSource,n=e._rangeStart;ue.ui.progress(e.wrapper.parent(),!1),clearTimeout(e._timeout),e.repaintScrollbar(),e.drag&&e.drag.cancel(),n&&!e._fetching&&(e._rangeStart=t.skip(),1===t.page()&&(e.verticalScrollbar[0].scrollTop=0)),e._fetching=!1}}),St={create:{text:"Add new record",imageClass:"k-add",className:"k-grid-add",iconClass:"k-icon"},cancel:{text:"Cancel changes",imageClass:"k-cancel",className:"k-grid-cancel-changes",iconClass:"k-icon"},save:{text:"Save changes",imageClass:"k-update",className:"k-grid-save-changes",iconClass:"k-icon"},destroy:{text:"Delete",imageClass:"k-delete",className:"k-grid-delete",iconClass:"k-icon"},edit:{text:"Edit",imageClass:"k-edit",className:"k-grid-edit",iconClass:"k-icon"},update:{text:"Update",imageClass:"k-update",className:"k-primary k-grid-update",iconClass:"k-icon"},canceledit:{text:"Cancel",imageClass:"k-cancel",className:"k-grid-cancel",iconClass:"k-icon"},excel:{text:"Export to Excel",imageClass:"k-i-excel",className:"k-grid-excel",iconClass:"k-icon"},pdf:{text:"Export to PDF",imageClass:"k-i-pdf",className:"k-grid-pdf",iconClass:"k-icon"}},Tt=ue.ui.DataBoundWidget.extend({init:function(t,n,i){var o=this;n=xe(n)?{dataSource:n}:n,me.fn.init.call(o,t,n),i&&(o._events=i),bt=ue.support.isRtl(t),o._element(),o._aria(),o._columns(o.options.columns),o._dataSource(),o._tbody(),o._pageable(),o._thead(),o._groupable(),o._toolbar(),o._setContentHeight(),o._templates(),o._navigatable(),o._selectable(),o._clipboard(),o._details(),o._editable(),o._attachCustomCommandsEvent(),o._minScreenSupport(),o.options.autoBind?o.dataSource.fetch():(o._group=o._groups()>0,o._footer()),o.lockedContent&&(o.wrapper.addClass("k-grid-lockedcolumns"),o._resizeHandler=function(){o.resize()},e(window).on("resize"+Fe,o._resizeHandler)),ue.notify(o)},events:[je,"dataBinding","cancel",Ye,Qe,Ke,Ve,Ue,We,Oe,Ne,He,$e,et,tt,qe,Ge,nt,it,ot],setDataSource:function(e){var t=this,n=t.options.scrollable;t.options.dataSource=e,t._dataSource(),t._pageable(),t._thead(),n&&(n.virtual?t.content.find(">.k-virtual-scrollable-wrap").scrollLeft(0):t.content.scrollLeft(0)),t.options.groupable&&t._groupable(),t.virtualScrollable&&t.virtualScrollable.setDataSource(t.options.dataSource),t.options.navigatable&&t._navigatable(),t.options.selectable&&t._selectable(),t.options.autoBind&&e.fetch()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,navigatable:!1,pageable:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:ft,confirmation:ht,confirmDelete:dt},commands:{create:St.create.text,cancel:St.cancel.text,save:St.save.text,destroy:St.destroy.text,edit:St.edit.text,update:St.update.text,canceledit:St.canceledit.text,excel:St.excel.text,pdf:St.pdf.text},noRecords:ut}},destroy:function(){var t,n=this;n._angularItems("cleanup"),n._destroyColumnAttachments(),me.fn.destroy.call(n),this._navigatableTables=null,n._resizeHandler&&e(window).off("resize"+Fe,n._resizeHandler),n.pager&&n.pager.element&&n.pager.destroy(),n.pager=null,n.groupable&&n.groupable.element&&n.groupable.element.kendoGroupable("destroy"),n.groupable=null,n.options.reorderable&&n.wrapper.data("kendoReorderable").destroy(),n.selectable&&n.selectable.element&&(n.selectable.destroy(),n.clearArea(),n.copyHandler&&(n.wrapper.off("keydown",n.copyHandler),n.unbind(n.copyHandler)),n.updateClipBoardState&&(n.unbind(n.updateClipBoardState),n.updateClipBoardState=null),n.clearAreaHandler&&n.wrapper.off("keyup",n.clearAreaHandler)),n.selectable=null,n.resizable&&(n.resizable.destroy(),n._resizeUserEvents&&(n._resizeHandleDocumentClickHandler&&e(document).off("click",n._resizeHandleDocumentClickHandler),n._resizeUserEvents.destroy(),n._resizeUserEvents=null),n.resizable=null),n.virtualScrollable&&n.virtualScrollable.element&&n.virtualScrollable.destroy(),n.virtualScrollable=null,n._destroyEditable(),n.dataSource&&(n.dataSource.unbind(je,n._refreshHandler).unbind(Me,n._progressHandler).unbind(Ee,n._errorHandler),n._refreshHandler=n._progressHandler=n._errorHandler=null),t=n.element.add(n.wrapper).add(n.table).add(n.thead).add(n.wrapper.find(">.k-grid-toolbar")),n.content&&(t=t.add(n.content).add(n.content.find(">.k-virtual-scrollable-wrap"))),n.lockedHeader&&n._removeLockedContainers(),n.pane&&n.pane.destroy(),n.minScreenResizeHandler&&e(window).off("resize",n.minScreenResizeHandler),n._draggableInstance&&n._draggableInstance.element&&n._draggableInstance.destroy(),n._draggableInstance=null,t.off(Fe),ue.destroy(n.wrapper),n.rowTemplate=n.altRowTemplate=n.lockedRowTemplate=n.lockedAltRowTemplate=n.detailTemplate=n.footerTemplate=n.groupFooterTemplate=n.lockedGroupFooterTemplate=n.noRecordsTemplate=null,n.scrollables=n.thead=n.tbody=n.element=n.table=n.content=n.footer=n.wrapper=n._groupableClickHandler=n._setContentWidthHandler=null},getOptions:function(){var n,i,o,r=this.options;return r.dataSource=null,n=we(!0,{},this.options),n.columns=ue.deepExtend([],this.columns),i=this.dataSource,o=i.options.data&&i._data,i.options.data=null,n.dataSource=e.extend(!0,{},i.options),i.options.data=o,n.dataSource.data=o,n.dataSource.page=i.page(),n.dataSource.filter=i.filter(),n.dataSource.pageSize=i.pageSize(),n.dataSource.sort=i.sort(),n.dataSource.group=i.group(),n.dataSource.aggregate=i.aggregate(),n.dataSource.transport&&(n.dataSource.transport.dataSource=null),n.pageable&&n.pageable.pageSize&&(n.pageable.pageSize=i.pageSize()),n.$angular=t,n},setOptions:function(e){var t,n,i,o,r=this.getOptions();ue.deepExtend(r,e),e.dataSource||(r.dataSource=this.dataSource),t=this.wrapper,n=this._events,i=this.element,this.destroy(),this.options=null,this._isMobile&&(o=t.closest(ue.roleSelector("pane")).parent(),o.after(t),o.remove(),t.removeClass("k-grid-mobile")),t[0]!==i[0]&&(t.before(i),t.remove()),i.empty(),this.init(i,r,n),this._setEvents(r)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t){return t.children().filter(function(){var t=e(this);return!t.hasClass("k-grouping-row")&&!t.hasClass("k-detail-row")&&!t.hasClass("k-group-footer")})},dataItems:function(){var e,t,n,i=ue.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(e=i.length,t=Array(2*e),n=e;--n>=0;)t[n]=t[n+e]=i[n];i=t}return i},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",function(){return{elements:t.thead.get()}}),t.thead.add(t.lockedHeader).find("th").each(function(){var t=e(this),n=t.data("kendoFilterMenu"),i=t.data("kendoColumnSorter"),o=t.data("kendoColumnMenu");n&&n.destroy(),i&&i.destroy(),o&&o.destroy()}))},_attachCustomCommandsEvent:function(){var e,t,n,i=this,o=O(i.columns||[]);for(t=0,n=o.length;n>t;t++)e=o[t].command,e&&a(i,i.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,n=t.element;n.is("table")||(n=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),n.length||(n=e("<table />").appendTo(t.element))),xt&&n.attr("cellspacing",0),t.table=n.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_createResizeHandle:function(t,n){var i,o,r,s,a,l,c,h=this,u=h.options.columnResizeHandleWidth,d=h.options.scrollable,f=h.resizeHandle,p=this._groups();if(f&&h.lockedContent&&f.data("th")[0]!==n[0]&&(f.off(Fe).remove(),f=null),f||(f=h.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(f)),bt)i=n.position().left,d&&(s=n.closest(".k-grid-header-wrap, .k-grid-header-locked"),a=yt.msie?s.scrollLeft():0,l=yt.webkit?s[0].scrollWidth-s[0].offsetWidth-s.scrollLeft():0,c=yt.mozilla?s[0].scrollWidth-s[0].offsetWidth-(s[0].scrollWidth-s[0].offsetWidth-s.scrollLeft()):0,i-=l-c+a);else{for(i=n[0].offsetWidth,o=N(n.closest("thead")).filter(":visible"),r=0;o.length>r&&o[r]!=n[0];r++)i+=o[r].offsetWidth;p>0&&(i+=t.find(".k-group-cell:first").outerWidth()*p),h._hasDetails()&&(i+=t.find(".k-hierarchy-cell:first").outerWidth())}f.css({top:n.position().top,left:i-u,height:n.outerHeight(),width:3*u}).data("th",n).show(),f.off("dblclick"+Fe).on("dblclick"+Fe,function(){h._autoFitLeafColumn(n.data("index"))})},_positionColumnResizeHandle:function(){var t=this,n=t.options.columnResizeHandleWidth,i=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t.thead.add(i).on("mousemove"+Fe,"th",function(i){var r,s,a,l=e(this);l.hasClass("k-group-cell")||l.hasClass("k-hierarchy-cell")||(r=i.clientX,s=e(window).scrollLeft(),a=l.offset().left+(bt?0:this.offsetWidth),r+s>a-n&&a+n>r+s?t._createResizeHandle(l.closest("div"),l):t.resizeHandle?t.resizeHandle.hide():o(t.wrapper,""))})},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._hideResizeHandle())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(Fe).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,n=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t._resizeUserEvents=new ue.UserEvents(n.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(n){var i=e(n.target);n.preventDefault(),i.addClass("k-column-active"),t._createResizeHandle(i.closest("div"),i),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=Se(t._resizeHandleDocumentClick,t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},_resizable:function(){var t,n,i,r,s,a,l,c=this,h=c.options,u=this._isMobile,d=ue.support.mobileOS?0:ue.support.scrollbar();h.resizable&&(t=h.scrollable?c.wrapper.find(".k-grid-header-wrap:first"):c.wrapper,u?c._positionColumnResizeHandleTouch(t):c._positionColumnResizeHandle(t),c.resizable&&c.resizable.destroy(),c.resizable=new de.Resizable(t.add(c.lockedHeader),{handle:(h.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:t.data("th").outerHeight()+c.tbody.attr("clientHeight")})},start:function(t){var d,f,p,g;l=e(t.currentTarget).data("th"),u&&c._hideResizeHandle(),d=l.closest("table"),f=e.inArray(l[0],N(l.closest("thead")).filter(":visible")),s=d.parent().hasClass("k-grid-header-locked"),p=s?c.lockedTable:c.table,g=c.footer||e(),c.footer&&c.lockedContent&&(g=c.footer.children(s?".k-grid-footer-locked":".k-grid-footer-wrap")),o(c.wrapper,"col-resize"),a=h.scrollable?d.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")").add(p.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")")).add(g.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")")):p.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")"),n=t.x.location,i=l.outerWidth(),r=s?p.children("tbody").outerWidth():c.tbody.outerWidth(),yt.webkit&&c.wrapper.addClass("k-grid-column-resizing")},resize:function(t){var o,u,f,p,g,m,v=bt?-1:1,_=i+t.x.location*v-n*v;h.scrollable?(s&&c.lockedFooter?o=c.lockedFooter.children("table"):c.footer&&(o=c.footer.find(">.k-grid-footer-wrap>table")),o&&o[0]||(o=e()),u=l.closest("table"),f=s?c.lockedTable:c.table,p=!1,g=c.wrapper.width()-d,m=_,s&&r-i+m>g&&(m=i+(g-r-2*d),0>m&&(m=_),p=!0),m>10&&(a.css("width",m),r&&(m=p?g-2*d:r+t.x.location*v-n*v,f.add(u).add(o).css("width",m),s||(c._footerWidth=m)))):_>10&&a.css("width",_)},resizeend:function(){var e,t,n,r=l.outerWidth();o(c.wrapper,""),yt.webkit&&c.wrapper.removeClass("k-grid-column-resizing"),i!=r&&(t=c.lockedHeader?c.lockedHeader.find("thead:first tr:first").add(c.thead.find("tr:first")):l.parent(),n=l.attr(ue.attr("index")),n||(n=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(l)),e=O(c.columns)[n],e.width=r,c.trigger(et,{column:e,oldWidth:i,newWidth:r}),c._applyLockedContainersWidth(),c._syncLockedContentHeight(),c._syncLockedHeaderHeight()),c._hideResizeHandle(),l=null}}))},_draggable:function(){var t=this;t.options.reorderable&&(t._draggableInstance&&t._draggableInstance.destroy(),t._draggableInstance=t.wrapper.kendoDraggable({group:ue.guid(),autoScroll:!0,filter:t.content?".k-grid-header:first "+Le:"table:first>.k-grid-header "+Le,drag:function(){t._hideResizeHandle()},hint:function(t){return e('<div class="k-header k-drag-clue" />').css({width:t.width(),paddingLeft:t.css("paddingLeft"),paddingRight:t.css("paddingRight"),lineHeight:t.height()+"px",paddingTop:t.css("paddingTop"),paddingBottom:t.css("paddingBottom")}).html(t.attr(ue.attr("title"))||t.attr(ue.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-denied" />')}}).data("kendoDraggable"))},_reorderable:function(){var t,n=this;n.options.reorderable&&(n.wrapper.data("kendoReorderable")&&n.wrapper.data("kendoReorderable").destroy(),t=function(e,t,i){var o=e[t],r=e[i],s=c(o,n.columns);return e=s?s.columns:n.columns,ke(r,e)},n.wrapper.kendoReorderable({draggable:n._draggableInstance,dragOverContainers:function(e,i){var o=S(n.columns);return o[e].lockable!==!1&&t(o,e,i)>-1},inSameContainer:function(i){return e(i.source).parent()[0]===e(i.target).parent()[0]&&t(S(n.columns),i.sourceIndex,i.targetIndex)>-1},change:function(e){var i=S(n.columns),o=i[e.oldIndex],r=t(i,e.oldIndex,e.newIndex);n.trigger(tt,{newIndex:r,oldIndex:ke(o,i),column:o}),n.reorderColumn(r,o,"before"===e.position)}}))},_reorderHeader:function(e,t,n){var i,o,a,l,c=this,h=y(e[0],c.columns),u=y(t,c.columns),d=[];for(i=0;e.length>i;i++)e[i].columns&&(d=d.concat(e[i].columns));o=s(c.lockedHeader,c.thead,"tr:eq("+h.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),a=R(e).length,l=R([t]).length,d.length?(a>0&&0===l?v(e,t,d,c.columns,c.lockedHeader.find("thead"),c.thead,this._groups()):0===a&&l>0&&v(e,t,d,c.columns,c.thead,c.lockedHeader.find("thead"),this._groups()),(t.columns||h.cell-u.cell>1||u.cell-h.cell>1)&&(t=k(c.columns,t,e[0],n),t&&c._reorderHeader(d,t,n))):a!==l&&m(o[h.cell],c.columns,a),
r(o,h.cell,u.cell,n,e.length)},_reorderContent:function(t,n,i){var o,a,l,c,h=this,u=e(),d=t[0],f=p(t),g=ke(d,O(h.columns)),m=ke(n,O(h.columns)),v=ke(d,F(h.columns)),_=ke(n,F(h.columns)),w=R(h.columns).length,b=!!n.locked,y=h.footer||h.wrapper.find(".k-grid-footer"),x=o=_;for(n.hidden&&(b?(_=h.lockedTable.find("colgroup"),x=h.lockedHeader.find("colgroup"),o=e(h.lockedFooter).find(">table>colgroup")):(_=h.tbody.prev(),x=h.thead.prev(),o=y.find(".k-grid-footer-wrap").find(">table>colgroup"))),h._hasFilterRow()&&r(h.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),g,m,i,t.length),r(s(h.lockedHeader,h.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),v,x,i,f.length),h.options.scrollable&&r(s(h.lockedTable,h.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),v,_,i,f.length),y&&y.length&&(r(s(h.lockedFooter,y.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),v,o,i,f.length),r(y.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),g,m,i,t.length)),a=h.tbody.children(":not(.k-grouping-row,.k-detail-row)"),h.lockedTable&&(w>m?g>=w&&ee(h.lockedTable.find(">tbody>tr.k-grouping-row"),h.table.find(">tbody>tr.k-grouping-row"),t.length):w>g&&ee(h.table.find(">tbody>tr.k-grouping-row"),h.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),u=h.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")),l=0,c=a.length;c>l;l+=1)r(s(u[l],a[l],">td:not(.k-group-cell,.k-hierarchy-cell)"),g,m,i,t.length)},_autoFitLeafColumn:function(e){this.autoFitColumn(O(this.columns)[e])},autoFitColumn:function(t){var n,i,o,r,s,a,l,c,h,u,p,g,m,v,_,w,b,y=this,x=y.options,k=y.columns,C=y.lockedHeader?N(y.lockedHeader.find(">table>thead")).filter(d).length:0,S="col:not(.k-group-col):not(.k-hierarchy-col)",D="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if(t="number"==typeof t?k[t]:_e(t)?ye(T(k),function(e){return e===t})[0]:ye(T(k),function(e){return e.field===t})[0],t&&f(t)){for(n=ke(t,O(k)),r=t.locked,o=r?y.lockedHeader.children("table"):y.thead.parent(),i=o.find("[data-index='"+n+"']"),a=r?y.lockedTable:y.table,l=y.footer||e(),y.footer&&y.lockedContent&&(l=y.footer.children(r?".k-grid-footer-locked":".k-grid-footer-wrap")),c=l.find("table").first(),y.lockedHeader&&!r&&(n-=C),h=0;k.length>h&&k[h]!==t;h++)k[h].hidden&&n--;if(s=x.scrollable?o.find(S).eq(n).add(a.children("colgroup").find(S).eq(n)).add(c.find("colgroup").find(S).eq(n)):a.children("colgroup").find(S).eq(n),u=o.add(a).add(c),p=i.outerWidth(),s.width(""),u.css("table-layout","fixed"),s.width("auto"),u.addClass("k-autofitting"),u.css("table-layout",""),g=Math.ceil(Math.max(i.outerWidth(),a.find("tr:not(.k-grouping-row)").eq(0).children(D).eq(n).outerWidth(),c.find("tr").eq(0).children(D).eq(n).outerWidth()))+1,s.width(g),t.width=g,x.scrollable){for(m=o.find("col"),_=0,w=0,b=m.length;b>w;w+=1){if(v=m[w].style.width,!v||-1!=v.indexOf("%")){_=0;break}_+=parseInt(v,10)}_&&u.each(function(){this.style.width=_+"px"})}yt.msie&&8==yt.version&&(u.css("display","inline-table"),setTimeout(function(){u.css("display","table")},1)),u.removeClass("k-autofitting"),y.trigger(et,{column:t,oldWidth:p,newWidth:g}),y._applyLockedContainersWidth(),y._syncLockedContentHeight(),y._syncLockedHeaderHeight()}},reorderColumn:function(e,n,i){var o,r,s=this,a=c(n,s.columns),l=a?a.columns:s.columns,h=ke(n,l),u=l[e],d=!!u.locked,f=R(s.columns).length;h!==e&&(n.locked||!d||1!=B(s.columns).length)&&(!n.locked||d||1!=f)&&(s._hideResizeHandle(),i===t&&(i=h>e),r=[n],s._reorderHeader(r,u,i),s.lockedHeader&&(P(s.thead),P(s.lockedHeader)),u.columns&&(u=O(u.columns),u=u[i?0:u.length-1]),n.columns&&(r=O(n.columns)),s._reorderContent(r,u,i),o=!!n.locked,o=o!=d,n.locked=d,l.splice(i?e:e+1,0,n),l.splice(e>h?h:h+1,1),s._templates(),s._updateColumnCellIndex(),s._updateTablesWidth(),s._applyLockedContainersWidth(),s._syncLockedHeaderHeight(),s._syncLockedContentHeight(),s._updateFirstColumnClass(),o&&(d?s.trigger(nt,{column:n}):s.trigger(it,{column:n})))},_updateColumnCellIndex:function(){var e,t=0;this.lockedHeader&&(e=this.lockedHeader.find("thead"),t=_(e,R(this.columns))),_(this.thead,B(this.columns),t)},lockColumn:function(e){var t,n=this.columns;e="number"==typeof e?n[e]:ye(n,function(t){return t.field===e})[0],!e||e.locked||e.hidden||(t=R(n).length-1,this.reorderColumn(t,e,!1))},unlockColumn:function(e){var t,n=this.columns;e="number"==typeof e?n[e]:ye(n,function(t){return t.field===e})[0],e&&e.locked&&!e.hidden&&(t=R(n).length,this.reorderColumn(t,e,!0))},cellIndex:function(t){var n=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(n=O(R(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+n},_modelForContainer:function(t){t=e(t),t.is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var n=t.attr(ue.attr("uid"));return this.dataSource.getByUid(n)},_editable:function(){var t,n=this,i=n.selectable&&n.selectable.options.multiple,o=n.options.editable,r=function(){var t=ge(),i=n._editContainer;!i||e.contains(i[0],t)||i[0]===t||e(t).closest(".k-animation-container").length||n.editable.end()&&n.closeCell()};o&&(t=n._editMode(),"incell"===t?o.update!==!1&&n.wrapper.on(rt+Fe,"tr:not(.k-grouping-row) > td",function(t){var o=e(this),r=n.lockedTable&&o.closest("table")[0]===n.lockedTable[0];o.hasClass("k-hierarchy-cell")||o.hasClass("k-detail-cell")||o.hasClass("k-group-cell")||o.hasClass("k-edit-cell")||o.has("a.k-grid-delete").length||o.has("button.k-grid-delete").length||o.closest("tbody")[0]!==n.tbody[0]&&!r||e(t.target).is(":input")||(n.editable?n.editable.end()&&(i&&e(ge()).blur(),n.closeCell(),n.editCell(o)):n.editCell(o))}).on("focusin"+Fe,function(){e.contains(this,ge())||(clearTimeout(n.timer),n.timer=null)}).on("focusout"+Fe,function(){n.timer=setTimeout(r,1)}):o.update!==!1&&n.wrapper.on(rt+Fe,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(t){t.preventDefault(),n.editRow(e(this).closest("tr"))}),o.destroy!==!1?n.wrapper.on(rt+Fe,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(t){t.preventDefault(),t.stopPropagation(),n.removeRow(e(this).closest("tr"))}):n.wrapper.on(rt+Fe,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(e){e.stopPropagation(),n._confirmation()||e.preventDefault()}))},editCell:function(t){var n,i,o,r;t=e(t),n=this,i=O(n.columns)[n.cellIndex(t)],o=n._modelForContainer(t),n.closeCell(),!o||o.editable&&!o.editable(i.field)||i.command||!i.field||(n._attachModelChange(o),n._editContainer=t,n.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:i.field,format:i.format,editor:i.editor,values:i.values},model:o,target:n,change:function(e){n.trigger(Ne,{values:e.values,container:t,model:o})&&e.preventDefault()}}).data("kendoEditable"),r=t.parent().addClass("k-grid-edit-row"),n.lockedContent&&ie(r[0],n._relatedRow(r).addClass("k-grid-edit-row")[0]),n.trigger(Oe,{container:t,model:o}))},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),n=e[0].offsetWidth>t[0].clientWidth?ue.support.scrollbar():0;this.lockedContent.height(t.height()-n)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){var e,t;this.lockedHeader&&(e=this.lockedHeader.children("table"),t=this.thead.parent(),this._adjustRowsHeight(e,t),ne(e,t))},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(rt+Fe,"a.k-grid-cancel",e._editCancelClickHandler),t.off(rt+Fe,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView()}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editContainer.data("kendoWindow").bind("deactivate",t).close()),e._actionSheet&&(e._actionSheet.destroy(),e._actionSheet=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t);n&&n.unbind(je,e._modelChangeHandler)},closeCell:function(t){var n,i,o,r,s=this,a=s._editContainer;a&&(n=a.closest("tr").attr(ue.attr("uid")),r=s.dataSource.getByUid(n),t&&s.trigger("cancel",{container:a,model:r})||(a.removeClass("k-edit-cell"),i=O(s.columns)[s.cellIndex(a)],o=a.parent().removeClass("k-grid-edit-row"),s._destroyEditable(),s._displayCell(a,i,r),a.hasClass("k-dirty-cell")&&e('<span class="k-dirty"/>').prependTo(a),s.trigger("itemChange",{item:o,data:r,ns:de}),s.lockedContent&&ie(o.css("height","")[0],s._relatedRow(o).css("height","")[0])))},_displayCell:function(e,t,n){var i=this,o={storage:{},count:0},r=we({},ue.Template,i.options.templateSettings),s=ue.template(i._cellTmpl(t,o),r);o.count>0&&(s=Se(s,o.storage)),e.empty().html(s(n)),i.angular("compile",function(){return{elements:e,data:[{dataItem:n}]}})},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var n,i=this,o=i._editMode();"incell"!==o&&i.cancelRow(),t=e(t),i.lockedContent&&(t=t.add(i._relatedRow(t))),t=t.hide(),n=i._modelForContainer(t),n&&!i.trigger(He,{row:t,model:n})?(i.dataSource.remove(n),("inline"===o||"popup"===o)&&i.dataSource.sync()):"incell"===o&&i._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return t!==!0&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(n){var i,o,r,s=this;n instanceof ue.data.ObservableObject?i=n:(n=e(n),i=s._modelForContainer(n)),o=s._editMode(),s.cancelRow(),i&&(n=s.tbody.children("["+ue.attr("uid")+"="+i.uid+"]"),s._attachModelChange(i),"popup"===o?s._createPopupEditor(i):"inline"===o?s._createInlineEditor(n,i):"incell"===o&&e(n).children(Pe).each(function(){var n=e(this),o=O(s.columns)[n.index()];return i=s._modelForContainer(n),i&&(!i.editable||i.editable(o.field))&&o.field?(s.editCell(n),!1):t}),r=s.editView?s.editView.element:s._editContainer,r&&(this._editCancelClickHandler||(this._editCancelClickHandler=Se(this._editCancelClick,this)),r.on(rt+Fe,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=Se(this._editUpdateClick,this)),r.on(rt+Fe,"a.k-grid-update",this._editUpdateClickHandler)))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var n,i=this,o=i.options.navigatable,r=i.editable.options.model,s=i.editView?i.editView.element:i._editContainer;t.preventDefault(),t.stopPropagation(),i.trigger("cancel",{container:s,model:r})||(n=i.items().index(e(i.current()).parent()),i.cancelRow(),o&&(i._setCurrent(i.items().eq(n).children().filter(Be).first()),re(i.table,!0)))},_createPopupEditor:function(n){var i,o,r,s,a,l,c,h,u,d,f,p=this,g="<div "+ue.attr("uid")+'="'+n.uid+'" class="k-popup-edit-form'+(p._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',m=[],v=O(p.columns),_=p.options.editable,w=_.template,b=_e(_)?_.window:{},y=we({},ue.Template,p.options.templateSettings);if(b=b||{},w)for(typeof w===ct&&(w=window.unescape(w)),g+=ue.template(w,y)(n),r=0,s=v.length;s>r;r++)i=v[r],i.command&&(h=oe(i.command,"edit"),h&&(o=h));else for(r=0,s=v.length;s>r;r++)i=v[r],i.command?i.command&&(h=oe(i.command,"edit"),h&&(o=h)):(g+='<div class="k-edit-label"><label for="'+i.field+'">'+(i.title||i.field||"")+"</label></div>",n.editable&&!n.editable(i.field)||!i.field?(d={storage:{},count:0},a=ue.template(p._cellTmpl(i,d),y),d.count>0&&(a=Se(a,d.storage)),g+='<div class="k-edit-field">'+a(n)+"</div>"):(m.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),g+="<div "+ue.attr("container-for")+'="'+i.field+'" class="k-edit-field"></div>'));o&&_e(o)&&(o.text&&_e(o.text)&&(l=o.text.update,c=o.text.cancel),o.attr&&(u=o.attr)),p._isMobile?(g+="</div></div>",p.editView=p.pane.append("<div data-"+ue.ns+'role="view" data-'+ue.ns+'use-native-scrolling="true" data-'+ue.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+ue.ns+'role="header" class="k-header">'+p._createButton({name:"update",text:l,attr:u})+(b.title||"Edit")+p._createButton({name:"canceledit",text:c,attr:u})+"</div>"+g+"</div>"),f=p._editContainer=p.editView.element.find(".k-popup-edit-form")):(g+='<div class="k-edit-buttons k-state-default">',g+=p._createButton({name:"update",text:l,attr:u})+p._createButton({name:"canceledit",text:c,attr:u}),g+="</div></div></div>",f=p._editContainer=e(g).appendTo(p.wrapper).eq(0).kendoWindow(we({modal:!0,resizable:!1,draggable:!0,title:"Edit",visible:!1,close:function(i){if(i.userTriggered){if(i.sender.element.focus(),p.trigger("cancel",{container:f,model:n}))return i.preventDefault(),t;var o=p.items().index(e(p.current()).parent());p.cancelRow(),p.options.navigatable&&(p._setCurrent(p.items().eq(o).children().filter(Be).first()),re(p.table,!0))}}},b))),p.editable=p._editContainer.kendoEditable({fields:m,model:n,clearContainer:!1,target:p}).data("kendoEditable"),p._isMobile&&f.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),p._openPopUpEditor(),p.trigger(Oe,{container:f,model:n})},_openPopUpEditor:function(){this._isMobile?this.pane.navigate(this.editView,this._editAnimation):this._editContainer.data("kendoWindow").center().open()},_createInlineEditor:function(t,n){var i,o,r,s=this,a=[];s.lockedContent&&(t=t.add(s._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(o=e(this),i=O(s.columns)[s.cellIndex(o)],i.command||!i.field||n.editable&&!n.editable(i.field)){if(i.command&&(r=oe(i.command,"edit"))){o.empty();var t,l,c;_e(r)&&(r.text&&_e(r.text)&&(t=r.text.update,l=r.text.cancel),r.attr&&(c=r.attr)),e(s._createButton({name:"update",text:t,attr:c})+s._createButton({name:"canceledit",text:l,attr:c})).appendTo(o)}}else a.push({field:i.field,format:i.format,editor:i.editor,values:i.values}),o.attr(ue.attr("container-for"),i.field),o.empty()}),s._editContainer=t,s.editable=new ue.ui.Editable(t.addClass("k-grid-edit-row"),{target:s,fields:a,model:n,clearContainer:!1}),t.length>1&&(ie(t[0],t[1]),s._applyLockedContainersWidth()),s.trigger(Oe,{container:t,model:n})},cancelRow:function(e){var t,n=this,i=n._editContainer;if(i){if(t=n._modelForContainer(i),e&&n.trigger("cancel",{container:i,model:t}))return;n._destroyEditable(),n.dataSource.cancelChanges(t),n._displayRow("popup"!==n._editMode()?i:n.tbody.find("["+ue.attr("uid")+"="+t.uid+"]"))}},saveRow:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t),i=e.editable;t&&i&&i.end()&&!e.trigger(Ne,{container:t,model:n})&&e.dataSource.sync()},_displayRow:function(t){var n,i,o,r,s,a=this,l=a._modelForContainer(t),c=t.hasClass("k-state-selected"),h=t.hasClass("k-alt");l&&(a.lockedContent&&(n=e((h?a.lockedAltRowTemplate:a.lockedRowTemplate)(l)),a._relatedRow(t.last()).replaceWith(n)),a.angular("cleanup",function(){return{elements:t.get()}}),i=e((h?a.altRowTemplate:a.rowTemplate)(l)),t.replaceWith(i),r=i,s=[{dataItem:l}],n&&n.length&&(r=i.add(n),s.push({dataItem:l})),a.angular("compile",function(){return{elements:r.get(),data:s}}),c&&a.options.selectable&&a.select(i.add(n)),n&&ie(i[0],n[0]),o=i.next(),o.hasClass("k-detail-row")&&o.is(":visible")&&i.find(".k-hierarchy-cell .k-icon").removeClass("k-plus").addClass("k-minus"))},_showMessage:function(t,n){var i,o,r,s=this;return s._isMobile?(i=ue.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>'),o=e(i(t)).appendTo(s.view.element),r=s._actionSheet=new ue.mobile.ui.ActionSheet(o,{cancel:t.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(t){var i=e(t.currentTarget).parent();i.hasClass("km-actionsheet-cancel")||s._removeRow(n)},popup:s._actionSheetPopupOptions}),r.open(n),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,n=t.options.editable,i=n===!0||typeof n===ct?t.options.messages.editable.confirmation:n.confirmation;return i!==!1&&null!=i?(typeof i===lt&&(i=i(t._modelForContainer(e))),t._showMessage({confirmDelete:n.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:n.cancelDelete||t.options.messages.editable.cancelDelete,title:i===!0?t.options.messages.editable.confirmation:i},e)):!0},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var e=this;(e.editable&&e.editable.end()||!e.editable)&&!e.trigger($e)&&e.dataSource.sync()},addRow:function(){var e,t,n,i,o,r,s=this,a=s.dataSource,l=s._editMode(),c=s.options.editable.createAt||"",h=a.pageSize(),u=a.view()||[];(s.editable&&s.editable.end()||!s.editable)&&("incell"!=l&&s.cancelRow(),e=a.indexOf(u[0]),"bottom"==c.toLowerCase()&&(e+=u.length,h&&!a.options.serverPaging&&u.length>=h&&(e-=1)),0>e&&(e=a.page()>a.totalPages()?(a.page()-1)*h:0),t=a.insert(e,{}),n=t.uid,i=s.lockedContent?s.lockedTable:s.table,o=i.find("tr["+ue.attr("uid")+"="+n+"]"),r=o.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(s._firstEditableColumnIndex(o)),"inline"===l&&o.length?s.editRow(o):"popup"===l?s.editRow(t):r.length&&s.editCell(r),"bottom"==c.toLowerCase()&&s.lockedContent&&(s.lockedContent[0].scrollTop=s.content[0].scrollTop=s.content[0].offsetHeight))},_firstEditableColumnIndex:function(e){var t,n,i,o=this,r=O(o.columns),s=o._modelForContainer(e);for(n=0,i=r.length;i>n;n++)if(t=r[n],s&&(!s.editable||s.editable(t.field))&&!t.command&&t.field&&t.hidden!==!0)return n;return-1},_toolbar:function(){var t,n=this,i=n.wrapper,o=n.options.toolbar,r=n.options.editable;o&&(t=n.wrapper.find(".k-grid-toolbar"),t.length||(Te(o)||(o=typeof o===ct?o:n._toolbarTmpl(o).replace(gt,"\\#"),o=Se(ue.template(o),n)),t=e('<div class="k-header k-grid-toolbar" />').html(o({})).prependTo(i),n.angular("compile",function(){return{elements:t.get()}})),r&&r.create!==!1&&t.on(rt+Fe,".k-grid-add",function(e){e.preventDefault(),n.addRow()}).on(rt+Fe,".k-grid-cancel-changes",function(e){e.preventDefault(),n.cancelChanges()}).on(rt+Fe,".k-grid-save-changes",function(e){e.preventDefault(),n.saveChanges()}),t.on(rt+Fe,".k-grid-excel",function(e){e.preventDefault(),n.saveAsExcel()}),t.on(rt+Fe,".k-grid-pdf",function(e){e.preventDefault(),n.saveAsPDF()}))},_toolbarTmpl:function(e){var t,n,i=this,o="";if(xe(e))for(t=0,n=e.length;n>t;t++)o+=i._createButton(e[t]);return o},_createButton:function(e){var n,o=e.template||wt,r=typeof e===ct?e:e.name||e.text,s=St[r]?St[r].className:"k-grid-"+(r||"").replace(/\s/g,""),a={className:s,text:r,imageClass:"",attr:"",iconClass:""},l=this.options.messages.commands;if(!(r||_e(e)&&e.template))throw Error("Custom commands should have name specified");return _e(e)?(e=we(!0,{},e),e.className&&ke(a.className,e.className.split(" "))<0?e.className+=" "+a.className:e.className===t&&(e.className=a.className),"edit"===r&&_e(e.text)&&(e=we(!0,{},e),e.text=e.text.edit),e.attr&&(_e(e.attr)&&(e.attr=i(e.attr)),typeof e.attr===ct&&(n=e.attr.match(/class="(.+?)"/),n&&ke(n[1],e.className.split(" "))<0&&(e.className+=" "+n[1]))),a=we(!0,a,St[r],{text:l[r]},e)):a=we(!0,a,St[r],{text:l[r]}),ue.template(o)(a)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(rt+Fe,t._groupableClickHandler):t._groupableClickHandler=function(n){var i=e(this),o=i.closest("tr");i.hasClass("k-i-collapse")?t.collapseGroup(o):t.expandGroup(o),n.preventDefault(),n.stopPropagation()},t._isLocked()?t.lockedTable.on(rt+Fe,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler):t.table.on(rt+Fe,".k-grouping-row .k-i-collapse, .k-grouping-row .k-i-expand",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,n=t.wrapper,i=t.options.groupable,o=Le+"["+ue.attr("field")+"]",r=t.content?".k-grid-header:first "+o:"table:first>.k-grid-header "+o;i&&i.enabled!==!1&&(n.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(n),t.groupable&&t.groupable.destroy(),t.groupable=new de.Groupable(n,we({},i,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:r,filter:r,allowDrag:t.options.reorderable})))},_continuousItems:function(t,n){var i,o,r,s,a,l,c,h;if(this.lockedContent){for(i=this,o=i.table.add(i.lockedTable),r=e(t,o[0]),s=e(t,o[1]),a=n?R(i.columns).length:1,l=n?i.columns.length-a:1,c=[],h=0;r.length>h;h+=a)Ce.apply(c,r.slice(h,h+a)),Ce.apply(c,s.splice(0,l));return c}},_selectable:function(){var n,i,o,r,s=this,a=[],l=s._isLocked(),c=s.options.selectable;c&&(s.selectable&&s.selectable.destroy(),c=ue.ui.Selectable.parseOptions(c),n=c.multiple,i=c.cell,s._hasDetails()&&(a[a.length]=".k-detail-row"),(s.options.groupable||s._hasFooters())&&(a[a.length]=".k-grouping-row,.k-group-footer"),a=a.join(","),""!==a&&(a=":not("+a+")"),o=s.table,l&&(o=o.add(s.lockedTable)),r=">"+(i?Ie:"tbody>tr"+a),s.selectable=new ue.ui.Selectable(o,{filter:r,aria:!0,multiple:n,change:function(){s.trigger(je)},useAllItems:l&&n&&i,relatedTarget:function(t){var n,o,r,a;if(!i&&l){for(o=e(),r=0,a=t.length;a>r;r++)n=s._relatedRow(t[r]),ke(n[0],t)<0&&(o=o.add(n));return o}},continuousItems:function(){return s._continuousItems(r,i)}}),s.options.navigatable&&o.on("keydown"+Fe,function(r){var a=s.current(),c=r.target;if(r.keyCode===ve.SPACEBAR&&e.inArray(c,o)>-1&&!a.is(".k-edit-cell,.k-header")&&a.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(r.preventDefault(),r.stopPropagation(),a=i?a:a.parent(),l&&!i&&(a=a.add(s._relatedRow(a))),n)if(r.ctrlKey){if(a.hasClass(Ze))return a.removeClass(Ze),s.trigger(je),t}else s.selectable.clear();else s.selectable.clear();s.selectable.value(a)}}))},_clipboard:function(){var e,t=this.options,n=t.selectable;n&&t.allowCopy&&(e=this,t.navigatable||e.table.add(e.lockedTable).attr("tabindex",0).on("mousedown"+Fe+" keydown"+Fe,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}).on("mousedown"+Fe,Re+">"+Be,Se(ae,e)),e.copyHandler=Se(e.copySelection,e),e.updateClipBoardState=function(){e.areaClipBoard&&e.areaClipBoard.val(e.getTSV()).focus().select()},e.bind("change",e.updateClipBoardState),e.wrapper.on("keydown",e.copyHandler),e.clearAreaHandler=Se(e.clearArea,e),e.wrapper.on("keyup",e.clearAreaHandler))},copySelection:function(t){t instanceof jQuery.Event&&!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&""+window.getSelection()||document.selection&&document.selection.createRange().text||(this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper)),this.areaClipBoard.val(this.getTSV()).focus().select())},getTSV:function(){var t,n,i,o,r,s,a=this,l=a.select(),c="	",h=a.options.allowCopy,u=!0;return e.isPlainObject(h)&&h.delimeter&&(c=h.delimeter),t="",l.length&&(l.eq(0).is("tr")&&(l=l.find("td:not(.k-group-cell)")),u&&l.filter(":visible"),n=[],i=this.columns.length,o=a._isLocked()&&R(a.columns).length,r=!0,e.each(l,function(t,s){var l,c,h,d;s=e(s),l=s.closest("tr"),c=l.index(),h=s.index(),u&&(h-=s.prevAll(":hidden").length),o&&r&&(r=e.contains(a.lockedTable[0],s[0])),a._groups()&&r&&(h-=a._groups()),h=r?h:h+o,i>h&&(i=h),d=s.text(),n[c]||(n[c]=[]),n[c][h]=d}),s=n.length,n=e.each(n,function(e,t){t&&(n[e]=t.slice(i),s>e&&(s=e))}),e.each(n.slice(s),function(e,n){t+=n?n.join(c)+"\r\n":"\r\n"})),t},clearArea:function(t){this.areaClipBoard&&t&&t.target===this.areaClipBoard[0]&&(this.options.navigatable?e(this.current()).closest("table").focus():this.table.focus()),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_minScreenSupport:function(){var t=this.hideMinScreenCols();t&&(this.minScreenResizeHandler=Se(this.hideMinScreenCols,this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,n){var i,o,r,s=!1;for(i=0;e.length>i;i++)o=e[i],r=o.minScreenWidth,r!==t&&null!==r&&(s=!0,r>n?this.hideColumn(o):this.showColumn(o)),!o.hidden&&o.columns&&(s=this._iterateMinScreenCols(o.columns,n)||s);return s},_relatedRow:function(t){var n,i,o=this.lockedTable;return t=e(t),o?(n=t.closest(this.table.add(this.lockedTable)),i=n.find(">tbody>tr").index(t),n=n[0]===this.table[0]?o:this.table,n.find(">tbody>tr").eq(i)):t},clearSelection:function(){var e=this;e.selectable.clear(),e.trigger(je)},select:function(e){var n=this,i=n.selectable;return e=n.table.add(n.lockedTable).find(e),e.length?(i.options.multiple||(i.clear(),e=e.first()),n._isLocked()&&(e=e.add(e.map(function(){return n._relatedRow(this)}))),i.value(e),t):i.value()},_updateCurrentAttr:function(t,n){var i,o=e(t).data("headerId");e(t).removeClass(Xe).removeAttr("aria-describedby").closest("table").removeAttr("aria-activedescendant"),o?(o=o.replace(this._cellId,""),e(t).attr("id",o)):e(t).removeAttr("id"),n.data("headerId",n.attr("id")).attr("id",this._cellId).addClass(Xe).closest("table").attr("aria-activedescendant",this._cellId),n.closest("tr").hasClass("k-grouping-row")||n.hasClass("k-header")?n.attr("aria-describedby",this._cellId):(i=this.columns[this.cellIndex(n)],i&&(o=i.headerAttributes.id),n.attr("aria-describedby",o+" "+this._cellId)),this._current=n},_scrollCurrent:function(){var t,n,i,o,r,s,a=this._current,l=this.options.scrollable;a&&l&&(t=a.parent(),n=t.closest("table").parent(),i=n.is(".k-grid-content-locked,.k-grid-header-locked"),o=n.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap"),r=e(this.content).find(">.k-virtual-scrollable-wrap").andSelf().last()[0],o&&(l.virtual?(s=Math.max(ke(t[0],this._items(t.parent())),0),this._rowVirtualIndex=this.virtualScrollable.itemIndex(s),this.virtualScrollable.scrollIntoView(t)):this._scrollTo(this._relatedRow(t)[0],r)),this.lockedContent&&(this.lockedContent[0].scrollTop=r.scrollTop),i||this._scrollTo(a[0],r))},current:function(e){return this._setCurrent(e,!0)},_setCurrent:function(t,n){var i=this._current;return t=e(t),t.length&&(i&&i[0]===t[0]||(this._updateCurrentAttr(i,t),this._scrollCurrent(),n||this.trigger(ot,{element:t}))),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(Xe),this._current=null)},_scrollTo:function(t,n){var i,o=t.tagName.toLowerCase(),r="td"===o||"th"===o,s=t[r?"offsetLeft":"offsetTop"],a=t[r?"offsetWidth":"offsetHeight"],l=n[r?"scrollLeft":"scrollTop"],c=n[r?"clientWidth":"clientHeight"],h=s+a,u=0,d=0,f=0;bt&&r&&(i=e(t).closest("table")[0],yt.msie?d=i.offsetLeft:yt.mozilla&&(f=i.offsetLeft-ue.support.scrollbar())),l=Math.abs(l+d-f),u=l>s?s:h>l+c?c>=a?h-c:s:l,u=Math.abs(u+d)+f,n[r?"scrollLeft":"scrollTop"]=u},_navigatable:function(){var t,n,i,o=this;o.options.navigatable&&(t=o.table.add(o.lockedTable),n=o.thead.parent().add(e(">table",o.lockedHeader)),i=t,o.options.scrollable&&(i=i.add(n),n.attr(at,-1)),this._navigatableTables=i,i.off("mousedown"+Fe+" focus"+Fe+" focusout"+Fe+" keydown"+Fe),n.on("keydown"+Fe,Se(o._openHeaderMenu,o)).find("a.k-link").attr("tabIndex",-1),t.attr(at,Ae.max(t.attr(at)||0,0)).on("mousedown"+Fe+" keydown"+Fe,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),i.on(ue.support.touch?"touchstart"+Fe:"mousedown"+Fe,Re+">"+Be,Se(ae,o)).on("focus"+Fe,Se(o._tableFocus,o)).on("focusout"+Fe,Se(o._tableBlur,o)).on("keydown"+Fe,Se(o._tableKeyDown,o)))},_openHeaderMenu:function(e){e.altKey&&e.keyCode==ve.DOWN&&(this.current().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())},_setTabIndex:function(e){this._navigatableTables.attr(at,-1),e.attr(at,0)},_tableFocus:function(t){var n,i;ue.support.touch||(n=this.current(),i=e(t.currentTarget),n&&n.is(":visible")?n.addClass(Xe):this._setCurrent(i.find(ze)),this._setTabIndex(i))},_tableBlur:function(){var e=this.current();e&&e.removeClass(Xe)},_tableKeyDown:function(n){var i,o=this.current(),r=this.virtualScrollable&&this.virtualScrollable.fetching(),s=e(n.target),a=!n.isDefaultPrevented()&&!s.is(":button,a,:input,a>.k-icon");return r?(n.preventDefault(),t):(o=o?o:e(this.lockedTable).add(this.table).find(ze),o.length&&(i=!1,a&&n.keyCode==ve.UP&&(i=this._moveUp(o)),a&&n.keyCode==ve.DOWN&&(i=this._moveDown(o)),a&&n.keyCode==(bt?ve.LEFT:ve.RIGHT)&&(i=this._moveRight(o,n.altKey)),a&&n.keyCode==(bt?ve.RIGHT:ve.LEFT)&&(i=this._moveLeft(o,n.altKey)),a&&n.keyCode==ve.PAGEDOWN&&(i=this._handlePageDown()),a&&n.keyCode==ve.PAGEUP&&(i=this._handlePageUp()),(n.keyCode==ve.ENTER||n.keyCode==ve.F2)&&(i=this._handleEnterKey(o,n.currentTarget,s)),n.keyCode==ve.ESC&&(i=this._handleEscKey(o,n.currentTarget)),n.keyCode==ve.TAB&&(i=this._handleTabKey(o,n.currentTarget,n.shiftKey)),i&&(n.preventDefault(),n.stopPropagation())),t)},_moveLeft:function(e,t){var n,i,o=e.parent(),r=o.parent();return t?this.collapseRow(o):(i=r.find(Re).index(o),n=this._prevHorizontalCell(r,e,i),n[0]||(r=this._horizontalContainer(r),n=this._prevHorizontalCell(r,e,i),n[0]!==e[0]&&re(r.parent(),!0)),this._setCurrent(n)),!0},_moveRight:function(e,t){var n,i,o=e.parent(),r=o.parent();return t?this.expandRow(o):(i=r.find(Re).index(o),n=this._nextHorizontalCell(r,e,i),n[0]||(r=this._horizontalContainer(r,!0),n=this._nextHorizontalCell(r,e,i),n[0]!==e[0]&&re(r.parent(),!0)),this._setCurrent(n)),!0},_moveUp:function(e){var t=e.parent().parent(),n=this._prevVerticalCell(t,e);return n[0]||(t=this._verticalContainer(t,!0),n=this._prevVerticalCell(t,e),n[0]&&re(t.parent(),!0)),this._setCurrent(n),!0},_moveDown:function(e){var t=e.parent().parent(),n=this._nextVerticalCell(t,e);return n[0]||(t=this._verticalContainer(t),n=this._nextVerticalCell(t,e),n[0]&&re(t.parent(),!0)),this._setCurrent(n),!0},_handlePageDown:function(){return this.options.pageable?(this.dataSource.page(this.dataSource.page()+1),!0):!1},_handlePageUp:function(){return this.options.pageable?(this.dataSource.page(this.dataSource.page()-1),!0):!1},_handleTabKey:function(t,n,i){var o,r=this.options.editable&&"incell"==this._editMode();return!r||t.is("th")?!1:(o=e(ge()).closest(".k-edit-cell"),o[0]&&o[0]!==t[0]&&(t=o),o=this._tabNext(t,n,i),o.length?(this._handleEditing(t,o,o.closest("table")),!0):!1)},_handleEscKey:function(t,n){var i,o=ge(),r="incell"==this._editMode();return le(t)?(r?this.closeCell(!0):(i=e(t).parent().index(),o&&o.blur(),this.cancelRow(!0),i>=0&&this._setCurrent(this.items().eq(i).children(Be).first())),yt.msie&&9>yt.version&&document.body.focus(),re(n,!0),!0):t.has(o).length?(re(n,!0),!0):!1},_toggleCurrent:function(e,t){var n=e.parent();return n.is(".k-grouping-row")?(n.find(".k-icon:first").click(),!0):!t&&n.is(".k-master-row")?(n.find(".k-icon:first").click(),!0):!1},_handleEnterKey:function(t,n,i){var o,r=this.options.editable,s=i.closest("[role=gridcell]");return i.is("table")||e.contains(t[0],i[0])||(t=s),t.is("th")?(t.find(".k-link").click(),!0):this._toggleCurrent(t,r)?!0:(o=t.find(":kendoFocusable:first"),o[0]&&!t.hasClass("k-edit-cell")&&t.hasClass("k-state-focused")?(o.focus(),!0):r&&!i.is(":button,.k-button,textarea")?(s[0]||(s=t),this._handleEditing(s,!1,n),!0):!1)},_nextHorizontalCell:function(e,t,n){
var i,o,r,s=t.nextAll(Pe);return s.length||(i=e.find(Re),o=i.index(t.parent()),-1!=o)?s.first():t.hasClass("k-header")?(r=[],I([R(this.columns)[0]],V(i.eq(0).children().first()),r,0,0),r[n]?r[n][0]:t):t.parent().hasClass("k-filter-row")?i.last().children(Pe).first():i.eq(n).children(Pe).first()},_prevHorizontalCell:function(e,t,n){var i,o,r,s,a=t.prevAll(Pe);return a.length||(i=e.find(Re),o=i.index(t.parent()),-1!=o)?a.first():t.hasClass("k-header")?(r=[],s=R(this.columns),I([s[s.length-1]],V(i.eq(0).children().last()),r,0,0),r[n]?r[n][0]:t):t.parent().hasClass("k-filter-row")?i.last().children(Pe).last():i.eq(n).children(Pe).last()},_currentDataIndex:function(e,n){var i,o=n.attr("data-index");return o?(i=R(this.columns).length,i&&!e.closest("div").hasClass("k-grid-content-locked")[0]?o-i:o):t},_prevVerticalCell:function(t,n){var i,o=n.parent(),r=t.children(Re),s=r.index(o),a=this._currentDataIndex(t,n);if(a||n.hasClass("k-header"))return i=H(n),i.eq(i.length-2);if(a=o.children(Pe).index(n),o.hasClass("k-filter-row"))return N(t).eq(a);if(-1==s){if(o=t.find(".k-filter-row"),!o[0])return N(t).eq(a)}else o=0===s?e():r.eq(s-1);return i=o.children(Pe),i.eq(i.length>a?a:0)},_nextVerticalCell:function(e,n){var i,o=n.parent(),r=e.children(Re),s=r.index(o),a=this._currentDataIndex(e,n);return-1!=s&&a===t&&n.hasClass("k-header")?V(n).eq(1):(a=a?parseInt(a,10):o.children(Pe).index(n),o=r.eq(-1==s?0:s+n[0].rowSpan),i=o.children(Pe),i.eq(i.length>a?a:0))},_verticalContainer:function(e,t){var n=e.parent(),i=this._navigatableTables.length,o=Math.floor(i/2),r=ke(n[0],this._navigatableTables);return t&&(o*=-1),r+=o,(r>=0||i>r)&&(n=this._navigatableTables.eq(r)),n.find(t?"thead":"tbody")},_horizontalContainer:function(e,t){var n,i,o=this._navigatableTables.length;return 2>=o?e:(n=e.parent(),i=ke(n[0],this._navigatableTables),i+=t?1:-1,!t||2!=i&&i!=o?!t&&(1==i||0>i)?e:this._navigatableTables.eq(i).find("thead, tbody"):e)},_tabNext:function(e,t,n){var i=!0,o=n?e.prevAll(Pe+":first"):e.nextAll(":visible:first");return o.length||(o=e.parent(),this.lockedTable&&(i=n&&t==this.lockedTable[0]||!n&&t==this.table[0],o=this._relatedRow(o)),i&&(o=o[n?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")),o=o.children(Pe+(n?":last":":first"))),o},_handleEditing:function(n,i,o){var r,s,a=this,l=e(ge()),c=a._editMode(),h=yt.msie,u=h&&9>yt.version,d=a._editContainer;if(o=e(o),s="incell"==c?n.hasClass("k-edit-cell"):n.parent().hasClass("k-grid-edit-row"),a.editable){if(e.contains(d[0],l[0])&&(yt.opera||u?l.blur().change().triggerHandler("blur"):(l.blur(),h&&l.blur())),!a.editable)return re(o),t;if(!a.editable.end())return a._setCurrent("incell"==c?d:d.children().filter(Pe).first()),r=d.find(":kendoFocusable:first")[0],r&&r.focus(),t;"incell"==c?a.closeCell():(a.saveRow(),s=!0)}i&&a._setCurrent(i),u&&document.body.focus(),re(o,!0),(!s&&!i||i)&&("incell"==c?a.editCell(a.current()):a.editRow(a.current().parent()))},_wrapper:function(){var e=this,t=e.table,n=e.options.height,i=e.element;i.is("div")||(i=i.wrap("<div/>").parent()),e.wrapper=i.addClass("k-grid k-widget"),n&&(e.wrapper.css(st,n),t.css(st,"auto")),e._initMobile()},_initMobile:function(){var t,n=this.options,i=this;this._isMobile=n.mobile===!0&&ue.support.mobileOS||"phone"===n.mobile||"tablet"===n.mobile,this._isMobile&&(t=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+ue.ns+'stretch="true" data-'+ue.ns+'role="view" data-'+ue.ns+'init-widgets="false"></div>').parent(),this.pane=ue.mobile.ui.Pane.wrap(t),this.view=this.pane.view(),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"},n.height&&this.pane.element.parent().css(st,n.height),this._editAnimation="slide",this.view.bind("show",function(){i._isLocked()&&(i._updateTablesWidth(),i._applyLockedContainersWidth(),i._syncLockedContentHeight(),i._syncLockedHeaderHeight(),i._syncLockedFooterHeight())}))},_tbody:function(){var t,n=this,i=n.table;t=i.find(">tbody"),t.length||(t=e("<tbody/>").appendTo(i)),n.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,n,i,o,r=this,s=r.options,a=s.scrollable,l=a!==!0&&a.virtual&&!r.virtualScrollable,c=!ue.support.kineticScrollNeeded||l?ue.support.scrollbar():0;a&&(t=r.wrapper.children(".k-grid-header"),t[0]||(t=e('<div class="k-grid-header" />').insertBefore(r.table)),t.css(bt?"padding-left":"padding-right",a.virtual?c+1:c),n=e('<table role="grid" />'),xt&&n.attr("cellspacing",0),n.width(r.table[0].style.width),n.append(r.thead),t.empty().append(e('<div class="k-grid-header-wrap k-auto-scrollable" />').append(n)),r.content=r.table.parent(),r.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")&&(r.content=r.content.parent()),r.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(r.content=r.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()),l&&(r.virtualScrollable=new Ct(r.content,{dataSource:r.dataSource,itemHeight:function(){return r._averageRowHeight()}})),r.scrollables=t.children(".k-grid-header-wrap").add(r.content),i=r.wrapper.find(".k-grid-footer"),i.length&&(r.scrollables=r.scrollables.add(i.children(".k-grid-footer-wrap"))),a.virtual?r.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+Fe).bind("scroll"+Fe,function(){r.scrollables.scrollLeft(this.scrollLeft),r.lockedContent&&(r.lockedContent[0].scrollTop=this.scrollTop)}):(r.scrollables.unbind("scroll"+Fe).bind("scroll"+Fe,function(e){r.scrollables.not(e.currentTarget).scrollLeft(this.scrollLeft),r.lockedContent&&e.currentTarget==r.content[0]&&(r.lockedContent[0].scrollTop=this.scrollTop)}),o=r.content.data("kendoTouchScroller"),o&&o.destroy(),o=ue.touchScroller(r.content),o&&o.movable&&(r.touchScroller=o,o.movable.bind("change",function(e){r.scrollables.scrollLeft(-e.sender.x),r.lockedContent&&r.lockedContent.scrollTop(-e.sender.y)}),r.one(Ye,function(e){e.sender.wrapper.addClass("k-grid-backface")}))))},_renderNoRecordsContent:function(){var t,n=this;n.options.noRecords&&(t=n.table.parent().children("."+Je),t.length&&t.remove(),n.dataSource&&n.dataSource.view().length||e(n.noRecordsTemplate({})).insertAfter(n.table))},_setContentWidth:function(t){var n,i=this,o="k-grid-content-expander",r='<div class="'+o+'"></div>',s=i.resizable;i.options.scrollable&&i.wrapper.is(":visible")&&(n=i.table.parent().children("."+o),i._setContentWidthHandler=Se(i._setContentWidth,i),i.dataSource&&i.dataSource.view().length?n[0]&&(n.remove(),s&&s.unbind("resize",i._setContentWidthHandler)):(n[0]||(n=e(r).appendTo(i.table.parent()),s&&s.bind("resize",i._setContentWidthHandler)),i.thead&&(n.width(i.thead.width()),t&&i.content.scrollLeft(t))),i._applyLockedContainersWidth(),i.lockedHeader&&0===i.table[0].clientWidth&&(i.table[0].style.width="1px"))},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),n=t.parent(),i=this.wrapper[0].clientWidth,o=this._groups(),r=ue.support.scrollbar(),s=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),a=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),l=A(s),c=A(a);o>0&&(l+=this.lockedHeader.find(".k-group-cell:first").outerWidth()*o),l>=i&&(l=i-3*r),this.lockedHeader.add(this.lockedContent).width(l),n[0].style.width=n.parent().width()-l-2+"px",t.add(this.table).width(c),this.virtualScrollable&&(i-=r),this.content[0].style.width=i-l-2+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(l),e=this.footer.find(".k-grid-footer-wrap"),e[0].style.width=n[0].clientWidth+"px",e.children().first().width(c))}},_setContentHeight:function(){var e,t=this,n=t.options,i=t.wrapper.innerHeight(),o=t.wrapper.children(".k-grid-header"),r=ue.support.scrollbar();n.scrollable&&t.wrapper.is(":visible")&&(i-=o.outerHeight(),t.pager&&(i-=t.pager.element.outerHeight()),n.groupable&&(i-=t.wrapper.children(".k-grouping-header").outerHeight()),n.toolbar&&(i-=t.wrapper.children(".k-grid-toolbar").outerHeight()),t.footerTemplate&&(i-=t.wrapper.children(".k-grid-footer").outerHeight()),e=function(e){var t,n;return e[0].style.height?!0:(t=e.height(),e.height("auto"),n=e.height(),t!=n?(e.height(""),!0):(e.height(""),!1))},e(t.wrapper)&&(i>2*r?(t.lockedContent&&(r=t.table[0].offsetWidth>t.table.parent()[0].clientWidth?r:0,t.lockedContent.height(i-r)),t.content.height(i)):t.content.height(2*r+1)))},_averageRowHeight:function(){var e,t=this,n=t._items(t.tbody).length,i=t._rowHeight;return 0===n?i:(t._rowHeight||(t._rowHeight=i=t.table.outerHeight()/n,t._sum=i,t._measures=1),e=t.table.outerHeight()/n,i!==e&&(t._measures++,t._sum+=e,t._rowHeight=t._sum/t._measures),i)},_dataSource:function(){var e,n=this,i=n.options,o=i.dataSource;o=xe(o)?{data:o}:o,_e(o)&&(we(o,{table:n.table,fields:n.columns}),e=i.pageable,_e(e)&&e.pageSize!==t&&(o.pageSize=e.pageSize)),n.dataSource&&n._refreshHandler?n.dataSource.unbind(je,n._refreshHandler).unbind(Me,n._progressHandler).unbind(Ee,n._errorHandler):(n._refreshHandler=Se(n.refresh,n),n._progressHandler=Se(n._requestStart,n),n._errorHandler=Se(n._error,n)),n.dataSource=fe.create(o).bind(je,n._refreshHandler).bind(Me,n._progressHandler).bind(Ee,n._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var n,i,o,r,s,a,l,c,h,u,d=this,f=d.tbody,p=t.model,g=d.tbody.find("tr["+ue.attr("uid")+"="+p.uid+"]"),m=g.hasClass("k-alt"),v=d._items(f).index(g),_=d.lockedContent;if(_&&(n=d._relatedRow(g)),g.add(n).children(".k-edit-cell").length&&!d.options.rowTemplate)g.add(n).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){i=e(this),o=O(d.columns)[d.cellIndex(i)],o.field===t.field&&(i.hasClass("k-edit-cell")?i.addClass("k-dirty-cell"):(d._displayCell(i,o,p),e('<span class="k-dirty"/>').prependTo(i)))});else if(!g.hasClass("k-grid-edit-row")){for(a=e().add(g),_&&(r=(m?d.lockedAltRowTemplate:d.lockedRowTemplate)(p),a=a.add(n),n.replaceWith(r)),d.angular("cleanup",function(){return{elements:a.get()}}),r=(m?d.altRowTemplate:d.rowTemplate)(p),g.replaceWith(r),r=d._items(f).eq(v),u=[{dataItem:p}],_&&(g=g.add(n),n=d._relatedRow(r)[0],ie(r[0],n),r=r.add(n),u.push({dataItem:p})),d.angular("compile",function(){return{elements:r.get(),data:u}}),s=d.options.selectable,s&&g.hasClass("k-state-selected")&&d.select(r),c=a.children(":not(.k-group-cell,.k-hierarchy-cell)"),l=r.children(":not(.k-group-cell,.k-hierarchy-cell)"),v=0,h=d.columns.length;h>v;v++)o=d.columns[v],i=l.eq(v),s&&c.eq(v).hasClass("k-state-selected")&&i.addClass("k-state-selected"),o.field===t.field&&e('<span class="k-dirty"/>').prependTo(i);d.trigger("itemChange",{item:r,data:p,ns:de})}},_pageable:function(){var t,n=this,i=n.options.pageable;i&&(t=n.wrapper.children("div.k-grid-pager"),t.length||(t=e('<div class="k-pager-wrap k-grid-pager"/>').appendTo(n.wrapper)),n.pager&&n.pager.destroy(),n.pager="object"==typeof i&&i instanceof ue.ui.Pager?i:new ue.ui.Pager(t,we({},i,{dataSource:n.dataSource})))},_footer:function(){var t,n,i,o,r=this,s=r.dataSource.aggregates(),a="",l=r.footerTemplate,c=r.options,h=r.footer||r.wrapper.find(".k-grid-footer");l?(a=e(r._wrapFooter(l(s))),h.length?(n=a,r.angular("cleanup",function(){return{elements:h.get()}}),h.replaceWith(n),h=r.footer=n):h=r.footer=c.scrollable?c.pageable?a.insertBefore(r.wrapper.children("div.k-grid-pager")):a.appendTo(r.wrapper):a.insertBefore(r.tbody),r.angular("compile",function(){return{elements:h.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:be(r.columns,function(e){return{column:e,aggregate:s[e.field]}})}})):h&&!r.footer&&(r.footer=h),h.length&&(c.scrollable&&(t=h.attr("tabindex",-1).children(".k-grid-footer-wrap"),r.scrollables=r.scrollables.filter(function(){return!e(this).is(".k-grid-footer-wrap")}).add(t)),r._footerWidth&&h.find("table").css("width",r._footerWidth),t&&(i=r.content.scrollLeft(),o=c.scrollable!==!0&&c.scrollable.virtual&&!r.virtualScrollable,o&&(i=r.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()),t.scrollLeft(i))),r.lockedContent&&(r._appendLockedColumnFooter(),r._applyLockedContainersWidth(),r._syncLockedFooterHeight())},_wrapFooter:function(t){var n=this,i="",o=ue.support.mobileOS?0:ue.support.scrollbar();return n.options.scrollable?(i=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(xt?' cellspacing="0"':"")+"><tbody>"+t+"</tbody></table></div></div>"),n._appendCols(i.find("table")),i.css(bt?"padding-left":"padding-right",o),i):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,n,i,o,r,s,a,l,c,h=this,u=O(h.columns),d=h.options,f=d.columnMenu,p=ye(h.columns,function(e){return e.columns!==t}).length>0,g=this._isMobile,m=function(e){h.trigger(We,{field:e.field,container:e.container})},v=function(e){re(e.closest("table"),!0)},_=d.$angular;if(f)for("boolean"==typeof f&&(f={}),s=N(h.thead),a=0,l=s.length;l>a;a++)n=u[a],c=s.eq(a),n.command||!n.field&&!c.attr("data-"+ue.ns+"field")||(e=c.data("kendoColumnMenu"),e&&e.destroy(),o=n.sortable!==!1&&f.sortable!==!1&&d.sortable!==!1?we({},d.sortable,{compare:(n.sortable||{}).compare}):!1,r=d.filterable&&n.filterable!==!1&&f.filterable!==!1?we({pane:h.pane},d.filterable,n.filterable):!1,n.filterable&&n.filterable.dataSource&&(r.forceUnique=!1,r.checkSource=n.filterable.dataSource),r&&(r.format=n.format),i={dataSource:h.dataSource,values:n.values,columns:f.columns,sortable:o,filterable:r,messages:f.messages,owner:h,closeCallback:v,init:m,pane:h.pane,filter:g?":not(.k-column-active)":"",lockedColumns:!p&&n.lockable!==!1&&R(u).length>0},_&&(i.$angular=_),c.kendoColumnMenu(i))},_headerCells:function(){return this.thead.find("th").filter(function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})},_filterable:function(){var e,t,n,i,o,r,s,a=this,l=O(a.columns),c=function(e){a.trigger(Ue,{field:e.field,container:e.container})},h=function(e){re(e.closest("table"),!0)},u=a.options.filterable;if(u&&typeof u.mode==ct&&-1==u.mode.indexOf("menu")&&(u=!1),u&&!a.options.columnMenu)for(t=N(a.thead),i=0,o=t.length;o>i;i++)n=t.eq(i),l[i].filterable===!1||l[i].command||!l[i].field&&!n.attr("data-"+ue.ns+"field")||(e=n.data("kendoFilterMenu"),e&&e.destroy(),e=n.data("kendoFilterMultiCheck"),e&&e.destroy(),r=l[i].filterable,s=we({},u,r,{dataSource:a.dataSource,values:l[i].values,format:l[i].format,closeCallback:h,title:l[i].title||l[i].field,init:c,pane:a.pane}),r&&r.messages&&(s.messages=we(!0,{},u.messages,r.messages)),r&&r.dataSource&&(s.forceUnique=!1,s.checkSource=r.dataSource),r&&r.multi?n.kendoFilterMultiCheck(s):n.kendoFilterMenu(s))},_filterRow:function(){var t,n,i,o,r,s,a,l,c,h,u,d,f,p,g=this;if(g._hasFilterRow())for(n=g.options.$angular,i=O(g.columns),o=g.options.filterable,r=g.thead.find(".k-filter-row"),this._updateHeader(this.dataSource.group().length),s=0;i.length>s;s++)if(l=i[s],c=g.options.filterable.operators,h=!1,u=e("<th/>"),d=l.field,l.hidden&&u.hide(),r.append(u),d&&l.filterable!==!1){if(f=l.filterable&&l.filterable.cell||{},a=g.options.dataSource,a instanceof fe&&(a=g.options.dataSource.options),p=we(!0,{},o.messages),l.filterable&&we(!0,p,l.filterable.messages),f.enabled===!1){u.html("&nbsp;");continue}f.dataSource&&(a=f.dataSource,h=!0),l.filterable&&l.filterable.operators&&(c=l.filterable.operators),t={column:l,dataSource:g.dataSource,suggestDataSource:a,customDataSource:h,field:d,messages:p,values:l.values,template:f.template,delay:f.delay,inputWidth:f.inputWidth,suggestionOperator:f.suggestionOperator,minLength:f.minLength,dataTextField:f.dataTextField,operator:f.operator,operators:c,showOperators:f.showOperators},n&&(t.$angular=n),e("<span/>").attr(ue.attr("field"),d).appendTo(u).kendoFilterCell(t)}else u.html("&nbsp;")},_sortable:function(){var e,t,n,i,o,r,s=this,a=O(s.columns),l=s.options.sortable;if(l){for(i=N(s.thead),o=0,r=i.length;r>o;o++)e=a[o],e.sortable!==!1&&!e.command&&e.field&&(n=i.eq(o),t=n.data("kendoColumnSorter"),t&&t.destroy(),n.attr("data-"+ue.ns+"field",e.field).kendoColumnSorter(we({},l,e.sortable,{dataSource:s.dataSource,aria:!0,filter:":not(.k-column-active)"})));i=null}},_columns:function(t){var n,i,o,r=this,s=r.table,a=s.find("col"),c=r.options.dataSource;if(t=t.length?t:be(s.find("th"),function(t,n){t=e(t);var i=t.attr(ue.attr("sortable")),o=t.attr(ue.attr("filterable")),r=t.attr(ue.attr("type")),s=t.attr(ue.attr("groupable")),l=t.attr(ue.attr("field")),c=t.attr(ue.attr("title")),h=t.attr(ue.attr("menu"));return l||(l=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:l,type:r,title:c,sortable:"false"!==i,filterable:"false"!==o,groupable:"false"!==s,menu:h,template:t.attr(ue.attr("template")),width:a.eq(n).css("width")}}),n=!(r.table.find("tbody tr").length>0&&(!c||!c.transport)),r.options.scrollable){if(o=t,i=R(t),t=B(t),i.length>0&&0===t.length)throw Error("There should be at least one non locked column");q(r.element.find("tr:has(th):first"),o),t=i.concat(t)}r.columns=l(t,n)},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,t,o,r){var s,a,l,c,h=this,u=we({},ue.Template,h.options.templateSettings),d=t.length,f={storage:{},count:0},p=h._hasDetails(),g=[],m=h._groups();if(!e){for(e="<tr",o&&g.push("k-alt"),p&&g.push("k-master-row"),g.length&&(e+=' class="'+g.join(" ")+'"'),d&&(e+=" "+ue.attr("uid")+'="#='+ue.expr("uid",u.paramName)+'#"'),e+=" role='row'>",m>0&&!r&&(e+=n(m)),p&&(e+='<td class="k-hierarchy-cell"><a class="k-icon k-plus" href="\\#" tabindex="-1"></a></td>'),s=0;d>s;s++)l=t[s],a=l.template,c=typeof a,e+="<td"+i(l.attributes)+" role='gridcell'>",e+=h._cellTmpl(l,f),e+="</td>";e+="</tr>"}return e=ue.template(e,u),f.count>0?Se(e,f.storage):e},_headerCellText:function(e){var t=this,n=we({},ue.Template,t.options.templateSettings),i=e.headerTemplate,o=typeof i,r=e.title||e.field||"";return o===lt?r=ue.template(i,n)({}):o===ct&&(r=i),r},_cellTmpl:function(e,t){var n,i,o=this,r=we({},ue.Template,o.options.templateSettings),s=e.template,a=r.paramName,l=e.field,c="",h=e.format,u=typeof s,d=e.values;if(e.command){if(xe(e.command)){for(n=0,i=e.command.length;i>n;n++)c+=o._createButton(e.command[n]);return c.replace(gt,"\\#")}return o._createButton(e.command).replace(gt,"\\#")}return u===lt?(t.storage["tmpl"+t.count]=s,c+="#=this.tmpl"+t.count+"("+a+")#",t.count++):u===ct?c+=s:d&&d.length&&_e(d[0])&&"value"in d[0]&&l?(c+="#var v ="+ue.stringify($(d)).replace(gt,"\\#")+"#",c+="#var f = v[",r.useWithBlock||(c+=a+"."),c+=l+"]#",c+="${f != null ? f : ''}"):(c+=e.encoded?"#:":"#=",h&&(c+='kendo.format("'+h.replace(pt,"\\$1")+'",'),l?(l=ue.expr(l,a),c+=l+"==null?'':"+l):c+="''",h&&(c+=")"),c+="#"),c},_templates:function(){var t=this,n=t.options,i=t.dataSource,o=i.group(),r=t.footer||t.wrapper.find(".k-grid-footer"),s=i.aggregate(),a=O(t.columns),l=O(R(t.columns)),c=n.scrollable?O(B(t.columns)):a;if(n.scrollable&&l.length){if(n.rowTemplate||n.altRowTemplate)throw Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(n.rowTemplate,c,!1,!0),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,c,!0,!0),t.lockedRowTemplate=t._tmpl(n.rowTemplate,l),t.lockedAltRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,l,!0)}else t.rowTemplate=t._tmpl(n.rowTemplate,c),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,c,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(n.detailTemplate||"")),(t._group&&!De(s)||!De(s)&&!r.length||ye(a,function(e){return e.footerTemplate}).length)&&(t.footerTemplate=t._footerTmpl(a,s,"footerTemplate","k-footer-template")),o&&ye(a,function(e){return e.groupFooterTemplate}).length&&(s=e.map(o,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(c,s,"groupFooterTemplate","k-group-footer",l.length),n.scrollable&&l.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(l,s,"groupFooterTemplate","k-group-footer"))),t.options.noRecords&&(t.noRecordsTemplate=t._noRecordsTmpl())},_noRecordsTmpl:function(){var t,n,i,o='<div class="{0}">{1}</div>',r='<div class="k-grid-norecords-template"{1}>{0}</div>',s=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"",a={storage:{},count:0},l=e.extend({},ue.Template,this.options.templateSettings),c=l.paramName,h="";return t=this.options.noRecords.template?this.options.noRecords.template:ue.format(r,this.options.messages.noRecords,s),n=typeof t,"function"===n?(a.storage["tmpl"+a.count]=t,h+="#=this.tmpl"+a.count+"("+c+")#",a.count++):"string"===n&&(h+=t),i=ue.template(ue.format(o,Je,h),l),a.count>0&&(i=e.proxy(i,a.storage)),i},_footerTmpl:function(e,t,o,r,s){var a,l,c,h,u,d=this,f=we({},ue.Template,d.options.templateSettings),p=f.paramName,g="",m={},v=0,_={},w=d._groups(),b=d.dataSource._emptyAggregates(t);for(g+='<tr class="'+r+'">',w>0&&!s&&(g+=n(w)),d._hasDetails()&&(g+='<td class="k-hierarchy-cell">&nbsp;</td>'),a=0,l=e.length;l>a;a++)u=e[a],c=u[o],h=typeof c,g+="<td"+i(u.footerAttributes)+">",c?(h!==lt&&(_=b[u.field]?we({},f,{paramName:p+"['"+u.field+"']"}):{},c=ue.template(c,_)),m["tmpl"+v]=c,g+="#=this.tmpl"+v+"("+p+")#",v++):g+="&nbsp;",g+="</td>";return g+="</tr>",g=ue.template(g,f),v>0?Se(g,m):g},_detailTmpl:function(e){var t=this,i="",o=we({},ue.Template,t.options.templateSettings),r=o.paramName,s={},a=0,l=t._groups(),c=p(O(t.columns)).length,h=typeof e;return i+='<tr class="k-detail-row">',l>0&&(i+=n(l)),i+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(c?' colspan="'+c+'"':"")+">",h===lt?(s["tmpl"+a]=e,i+="#=this.tmpl"+a+"("+r+")#",a++):i+=e,i+="</td></tr>",i=ue.template(i,o),a>0?Se(i,s):i},_hasDetails:function(){var e=this;return null!==e.options.detailTemplate||(e._events[Ve]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,n=t&&typeof t.mode==ct&&-1!=t.mode.indexOf("row"),i=this.columns,o=e.grep(i,function(e){return e.filterable===!1});return i.length&&o.length==i.length&&(n=!1),n},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&R(t.columns).length)throw Error("Having both detail template and locked columns is not supported");t.table.on(rt+Fe,".k-hierarchy-cell .k-plus, .k-hierarchy-cell .k-minus",function(n){var i,o,r=e(this),s=r.hasClass("k-plus"),a=r.closest("tr.k-master-row"),l=t.detailTemplate,c=t._hasDetails();return r.toggleClass("k-plus",!s).toggleClass("k-minus",s),i=a.next(),c&&!i.hasClass("k-detail-row")&&(o=t.dataItem(a),i=e(l(o)).addClass(a.hasClass("k-alt")?"k-alt":"").insertAfter(a),t.angular("compile",function(){return{elements:i.get(),data:[{dataItem:o}]}}),t.trigger(Ve,{masterRow:a,detailRow:i,data:o,detailCell:i.find(".k-detail-cell")})),t.trigger(s?Qe:Ke,{masterRow:a,detailRow:i}),i.toggle(s),t._current&&t._current.attr("aria-expanded",s),n.preventDefault(),!1})},dataItem:function(t){if(t=e(t)[0],!t)return null;var n,i,o=this.tbody.children(),r=/k-grouping-row|k-detail-row|k-group-footer/,s=t.sectionRowIndex;for(i=s,n=0;s>n;n++)r.test(o[n].className)&&i--;return this._data[i]},expandRow:function(t){e(t).find("> td .k-plus, > td .k-i-expand").click()},collapseRow:function(t){e(t).find("> td .k-minus, > td .k-i-collapse").click()},_createHeaderCells:function(e,n){var o,r,s,a,l,c,h=this,u="",d=O(h.columns);for(o=0,a=e.length;a>o;o++)r=e[o].column||e[o],s=h._headerCellText(r),l="",c=ke(r,d),r.command?(u+="<th scope='col'"+i(r.headerAttributes),n&&!e[o].colSpan&&(u+=" rowspan='"+n+"'"),c>-1&&(u+=ue.attr("index")+"='"+c+"'"),u+=">"+s+"</th>"):(r.field&&(l=ue.attr("field")+"='"+r.field+"' "),u+="<th scope='col' role='columnheader' "+l,n&&!e[o].colSpan&&(u+=" rowspan='"+n+"'"),e[o].colSpan>1&&(u+='colspan="'+(e[o].colSpan-D(r.columns))+'" ',u+=ue.attr("colspan")+"='"+e[o].colSpan+"'"),r.title&&(u+=ue.attr("title")+'="'+r.title.replace('"',"&quot;").replace(/'/g,"'")+'" '),r.groupable!==t&&(u+=ue.attr("groupable")+"='"+r.groupable+"' "),r.aggregates&&r.aggregates.length&&(u+=ue.attr("aggregates")+"='"+r.aggregates+"'"),c>-1&&(u+=ue.attr("index")+"='"+c+"'"),u+=i(r.headerAttributes),u+=">"+s+"</th>");return u},_appendLockedColumnContent:function(){var t,n,i,o,r,s=this.columns,a=this.table.find("colgroup"),l=a.find("col:not(.k-group-col,.k-hierarchy-col)"),c=e(),h=0,u=0;for(t=0,n=s.length;n>t;t++)if(s[t].locked)if(f(s[t])){for(o=1,s[t].columns&&(o=O(s[t].columns).length-D(s[t].columns)),o=o||1,r=0;o>r;r++)c=c.add(l.eq(t+u+r-h));u+=o-1}else h++;i=e('<div class="k-grid-content-locked"><table'+(xt?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>"),a.detach(),i.find("colgroup").append(c),a.insertBefore(this.table.find("tbody")),this.lockedContent=i.insertBefore(this.content),this.lockedTable=i.children("table")},_appendLockedColumnFooter:function(){var t,n,i=this,o=i.footer,r=o.find(".k-footer-template>td"),s=o.find(".k-grid-footer-wrap>table>colgroup>col"),a=e('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),l=i._groups(),c=e(),h=e();for(c=c.add(r.filter(".k-group-cell")),t=0,n=O(R(i.columns)).length;n>t;t++)c=c.add(r.eq(t+l));for(h=h.add(s.filter(".k-group-col")),t=0,n=p(O(L(i.columns))).length;n>t;t++)h=h.add(s.eq(t+l));c.appendTo(a.find("tr")),h.appendTo(a.find("colgroup")),i.lockedFooter=a.prependTo(o)},_appendLockedColumnHeader:function(t){var n,i,o,r,s,a,l,c,h,u,d,p=this,m=this.columns,v=[],_=0,w=e(),b=p._hasFilterRow(),y=0,x=e(),k=0,C=e(),S=p.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),T=p.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),A=p.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),E=0;for(n=0,o=m.length;o>n;n++){if(m[n].locked){if(l=T.eq(n),k=O(m[n].columns||[]).length,f(m[n])){for(m[n].columns&&(c=k-D(m[n].columns)),c=c||1,h=0;c>h;h++)w=w.add(S.eq(n+E+h-_));E+=c-1}for(I([m[n]],V(l),v,0,0),k=k||1,u=0;k>u;u++)x=x.add(A.eq(y+u));y+=k}m[n].columns&&(_+=D(m[n].columns)),f(m[n])||_++}if(v.length){for(i='<div class="k-grid-header-locked" style="width:1px"><table'+(xt?' cellspacing="0"':"")+"><colgroup/><thead>",i+=Array(v.length+1).join("<tr></tr>"),i+=(b?'<tr class="k-filter-row" />':"")+"</thead></table></div>",a=e(i),S=a.find("colgroup"),S.append(p.thead.prev().find("col.k-group-col").add(w)),r=a.find("thead tr:not(.k-filter-row)"),n=0,o=v.length;o>n;n++)C=g(v[n]),r.eq(n).append(p.thead.find("tr:eq("+n+") .k-group-cell").add(C));return d=P(this.thead),d>v.length&&M(a,d-v.length),s=a.find(".k-filter-row"),s.append(p.thead.find(".k-filter-row .k-group-cell").add(x)),this.lockedHeader=a.prependTo(t),this.thead.find(".k-group-cell").remove(),!0}return!1},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);ue.destroy(e),e.off(Fe).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,n,i,o,r,s,a,l=this,c=l.columns,h=l._hasDetails()&&c.length,u=l._hasFilterRow(),d="",f=l.table.find(">thead"),p=l.element.find("thead:first").length>0;if(f.length||(f=e("<thead/>").insertBefore(l.tbody)),l.lockedHeader&&l.thead?(n=l.thead.find("tr:has(th):not(.k-filter-row)").html(""),n.remove(),n=e(),l._removeLockedContainers()):n=l.element.find(p?"thead:first tr:has(th):not(.k-filter-row)":"tr:has(th):first"),!n.length&&(n=f.children().first(),!n.length)){for(i=[{rowSpan:1,cells:[],index:0}],l._prepareColumns(i,c),t=0;i.length>t;t++)d+="<tr>",h&&(d+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),d+=l._createHeaderCells(i[t].cells,i[t].rowSpan),d+="</tr>";n=e(d)}u&&(o=e("<tr/>"),o.addClass("k-filter-row"),(h||n.find(".k-hierarchy-cell").length)&&o.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),r=(l.thead||f).find(".k-filter-row"),r.length&&(ue.destroy(r),r.remove()),f.append(o)),n.children().length?h&&!n.find(".k-hierarchy-cell")[0]&&n.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'):(d="",h&&(d+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),d+=l._createHeaderCells(c),n.html(d)),n.attr("role","row").find("th").addClass("k-header"),l.options.scrollable||f.addClass("k-grid-header"),n.find("script").remove().end().prependTo(f),l.thead&&l._destroyColumnAttachments(),this.angular("cleanup",function(){return{elements:f.find("th").get()}}),this.angular("compile",function(){return{elements:f.find("th").get(),data:be(c,function(e){return{column:e}})}}),l.thead=f.attr("role","rowgroup"),l._sortable(),l._filterable(),l._filterRow(),l._scrollable(),l._updateCols(),l._columnMenu(),a=this.options.scrollable&&R(this.columns).length,a&&(s=l._appendLockedColumnHeader(l.thead.closest(".k-grid-header")),l._appendLockedColumnContent(),l.lockedContent.bind("DOMMouseScroll"+Fe+" mousewheel"+Fe,Se(l._wheelScroll,l))),l._updateColumnCellIndex(),l._updateFirstColumnClass(),l._resizable(),l._draggable(),l._reorderable(),l._updateHeader(l._groups()),a&&(s&&l._syncLockedHeaderHeight(),l._applyLockedContainersWidth()),l.groupable&&l._attachGroupable()},_updateFirstColumnClass:function(){var t,n,i=this,o=i.columns||[],r=i._hasDetails()&&o.length;r||i._groups()||(t=e(),n=i.thead.find(">tr:not(.k-filter-row):not(:first)"),o=B(o),n.length&&o[0]&&!o[0].columns&&(t=t.add(n)),i._isLocked()&&(n=i.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),o=R(i.columns),n.length&&o[0]&&!o[0].columns&&(t=t.add(n))),t.each(function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))},_prepareColumns:function(e,t,n,i){var o,r,s=i||e[e.length-1],a=e[s.index+1],l=0;for(o=0;t.length>o;o++)r={column:t[o],colSpan:0},s.cells.push(r),t[o].columns&&t[o].columns.length&&(a||(a={rowSpan:0,cells:[],index:e.length},e.push(a)),r.colSpan=t[o].columns.length,this._prepareColumns(e,t[o].columns,r,a),l+=r.colSpan-1,s.rowSpan=e.length-s.index);n&&(n.colSpan+=l)},_wheelScroll:function(t){var n,i,o;t.ctrlKey||(n=this.content,this.options.scrollable.virtual&&(n=this.virtualScrollable.verticalScrollbar),i=n.scrollTop(),o=ue.wheelDeltaY(t),o&&(t.preventDefault(),e(t.currentTarget).one("wheel"+Fe,!1),n.scrollTop(i+-o)))},_isLocked:function(){return null!=this.lockedHeader},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);this._isLocked()?G(e,F(z(this.columns)),this._hasDetails(),0):G(e,F(p(this.columns)),this._hasDetails(),0)},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&(e=e||this.lockedHeader.find("table").add(this.lockedTable),G(e,F(L(this.columns)),this._hasDetails(),this._groups()))},_appendCols:function(e,t){t?G(e,F(z(this.columns)),this._hasDetails(),0):G(e,F(p(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,n,i=this;e=e.toJSON(),n=!(i.table.find("tbody tr").length>0&&(!i.dataSource||!i.dataSource.transport));for(t in e)i.columns.push({field:t,encoded:n,headerAttributes:{id:ue.guid()}});i._thead(),i._templates()}},_rowsHtml:function(e,t){var n,i,o=this,r="",s=t.rowTemplate,a=t.altRowTemplate;for(n=0,i=e.length;i>n;n++)r+=n%2?a(e[n]):s(e[n]),o._data.push(e[n]);return r},_groupRowHtml:function(e,t,n,i,o,r){var s,a,l=this,c="",h=e.field,u=ye(O(l.columns),function(e){return e.field==h})[0]||{},d=u.groupHeaderTemplate,f=(u.title||h)+": "+Y(e.value,u.format,u.values,u.encoded),p=l._groupAggregatesDefaultObject||{},g=we({},p,e.aggregates),m=we({},{field:e.field,value:e.value,aggregates:g},e.aggregates[e.field]),v=o.groupFooterTemplate,_=e.items;if(d&&(f=typeof d===lt?d(m):ue.template(d)(m)),c+=i(t,n,f),e.hasSubgroups)for(s=0,a=_.length;a>s;s++)c+=l._groupRowHtml(_[s],r?t:t-1,n+1,i,o,r);else c+=l._rowsHtml(_,o);return v&&(c+=v(g)),c},collapseGroup:function(t){t=e(t);var n,i,o,r,s,a=this.options.groupable,l=a.showFooter,c=l?0:1,h=e();for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?h=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(h=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),n=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-expand").removeClass("k-i-collapse"),
t.find("td[aria-expanded='true']:first").attr("aria-expanded",!1),t=t.nextAll("tr"),o=0,r=t.length;r>o&&(s=t.eq(o),i=s.find(".k-group-cell").length,s.hasClass("k-grouping-row")?c++:s.hasClass("k-group-footer")&&c--,!(n>=i||s.hasClass("k-group-footer")&&0>c));o++)s.hide(),h.eq(o).hide()},expandGroup:function(t){t=e(t);var n,i,o,r,s,a=this,l=a.options.groupable.showFooter,c=e(),h=[],u=1;for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?c=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(c=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),n=t.find(".k-group-cell").length,t.find(".k-icon").addClass("k-i-collapse").removeClass("k-i-expand"),t.find("td[aria-expanded='false']:first").attr("aria-expanded",!0),t=t.nextAll("tr"),r=0,s=t.length;s>r&&(i=t.eq(r),o=i.find(".k-group-cell").length,!(n>=o));r++)o!=n+1||i.hasClass("k-detail-row")||(i.show(),c.eq(r).show(),i.hasClass("k-grouping-row")&&i.find(".k-icon").hasClass("k-i-collapse")&&a.expandGroup(i),i.hasClass("k-master-row")&&i.find(".k-icon").hasClass("k-minus")&&(i.next().show(),c.eq(r+1).show())),i.hasClass("k-grouping-row")&&(l&&h.push(i.is(":visible")),u++),i.hasClass("k-group-footer")&&(l&&i.toggle(h.pop()),1==u?(i.show(),c.eq(r).show()):u--)},_updateHeader:function(t){var n=this,i=n._isLocked()?n.lockedHeader.find("thead"):n.thead,o=i.find("tr.k-filter-row").find("th.k-group-cell").length,r=i.find("tr:first").find("th.k-group-cell").length,s=i.children("tr:not(:first)").filter(function(){return!e(this).children(":visible").length});t>r?(e(Array(t-r+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(i.children("tr:not(.k-filter-row)")),n.element.is(":visible")&&s.find("th.k-group-cell").hide()):r>t&&i.find("tr").each(function(){e(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()}),t>o&&e(Array(t-o+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(i.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,n=this;n._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",n.wrapper).add(n.thead.parent()).add(n.table),n._footerWidth=te(t.eq(0)),t.width(n._footerWidth),t=e(">.k-grid-footer>.k-grid-footer-locked>table",n.wrapper).add(n.lockedHeader.find(">table")).add(n.lockedTable),t.width(te(t.eq(0))))},hideColumn:function(n){var i,o,r,a,l,c,h,g,m,v,_=this,w=0,b=_.footer||_.wrapper.find(".k-grid-footer"),y=_.columns,x=_.lockedHeader?N(_.lockedHeader.find(">table>thead")).filter(d).length:0;if(n="number"==typeof n?y[n]:_e(n)?ye(T(y),function(e){return e===n})[0]:ye(T(y),function(e){return e.field===n})[0],n&&f(n)){if(n.columns&&n.columns.length){for(c=C(n,y),u(n,!1),Q(s(e(">table>thead",_.lockedHeader),_.thead,">tr:eq("+c.row+")>th"),c.cell,!1),r=0;n.columns.length>r;r++)this.hideColumn(n.columns[r]);return _.trigger(Ge,{column:n}),t}if(m=ke(n,p(O(y))),u(n,!1),_._setParentsVisibility(n,!1),_._templates(),_._updateCols(),_._updateLockedCols(),v=_.thead,h=m,_.lockedHeader&&x>m?v=_.lockedHeader.find(">table>thead"):h-=x,i=N(v).filter(d).eq(h),i[0].style.display="none",Q(s(e(">table>thead",_.lockedHeader),_.thead,">tr.k-filter-row>th"),m,!1),b[0]&&(_._updateCols(b.find(">.k-grid-footer-wrap>table")),_._updateLockedCols(b.find(">.k-grid-footer-locked>table")),Q(b.find(".k-footer-template>td"),m,!1)),_.lockedTable&&x>m?K(_.lockedTable.find(">tbody>tr"),m):K(_.tbody.children(),m-x),_.lockedTable)_._updateTablesWidth(),_._applyLockedContainersWidth(),_._syncLockedContentHeight(),_._syncLockedHeaderHeight(),_._syncLockedFooterHeight();else{for(a=_.thead.prev().find("col"),r=0,g=a.length;g>r;r+=1){if(l=a[r].style.width,!l||-1!=l.indexOf("%")){w=0;break}w+=parseInt(l,10)}o=e(">.k-grid-header table:first,>.k-grid-footer table:first",_.wrapper).add(_.table),_._footerWidth=null,w&&(o.each(function(){this.style.width=w+"px"}),_._footerWidth=w),yt.msie&&8==yt.version&&(o.css("display","inline-table"),setTimeout(function(){o.css("display","table")},1))}_._updateFirstColumnClass(),_.trigger(Ge,{column:n})}},_setParentsVisibility:function(t,n){var i,o,r,a,l,c=this.columns,d=[],f=n?function(e){return p(e.columns).length&&e.hidden}:function(e){return!p(e.columns).length&&!e.hidden};if(h(t,c,d)&&d.length)for(i=d.length-1;i>=0;i--)o=d[i],r=y(o,c),a=s(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+r.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(r.cell),f(o)&&(u(o,n),a[0].style.display=n?"":"none"),a.filter("["+ue.attr("colspan")+"]").length&&(l=parseInt(a.attr(ue.attr("colspan")),10),a[0].colSpan=l-D(o.columns)||1)},showColumn:function(n){var i,o,r,a,l,c,h,d,p,g,m,v=this,_=v.columns,w=v.footer||v.wrapper.find(".k-grid-footer"),b=v.lockedHeader?N(v.lockedHeader.find(">table>thead")).length:0;if(n="number"==typeof n?_[n]:_e(n)?ye(T(_),function(e){return e===n})[0]:ye(T(_),function(e){return e.field===n})[0],n&&!f(n)){if(n.columns&&n.columns.length){for(h=y(n,_),u(n,!0),Q(s(e(">table>thead",v.lockedHeader),v.thead,">tr:eq("+h.row+")>th"),h.cell,!0),i=0;n.columns.length>i;i++)this.showColumn(n.columns[i]);return v.trigger(qe,{column:n}),t}if(g=ke(n,O(_)),u(n,!0),v._setParentsVisibility(n,!0),v._templates(),v._updateCols(),v._updateLockedCols(),m=v.thead,c=g,v.lockedHeader&&b>g?m=v.lockedHeader.find(">table>thead"):c-=b,r=N(m).eq(c),r[0].style.display="",Q(s(e(">table>thead",v.lockedHeader),v.thead,">tr.k-filter-row>th"),g,!0),w[0]&&(v._updateCols(w.find(">.k-grid-footer-wrap>table")),v._updateLockedCols(w.find(">.k-grid-footer-locked>table")),Q(w.find(".k-footer-template>td"),g,!0)),v.lockedTable&&b>g?J(v.lockedTable.find(">tbody>tr"),g):J(v.tbody.children(),g-b),v.lockedTable)v._updateTablesWidth(),v._applyLockedContainersWidth(),v._syncLockedContentHeight(),v._syncLockedHeaderHeight();else if(a=e(">.k-grid-header table:first,>.k-grid-footer table:first",v.wrapper).add(v.table),n.width){for(l=0,p=v.thead.prev().find("col"),i=0,o=p.length;o>i;i+=1){if(d=p[i].style.width,d.indexOf("%")>-1){l=0;break}l+=parseInt(d,10)}v._footerWidth=null,l&&(a.each(function(){this.style.width=l+"px"}),v._footerWidth=l)}else a.width("");v._updateFirstColumnClass(),v.trigger(qe,{column:n})}},_progress:function(e){var t=this.element;this.lockedContent?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content),ue.ui.progress(t,e)},_resize:function(e,t){this._syncLockedHeaderHeight(),this.content&&(this._setContentWidth(),this._setContentHeight()),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar())},_isActiveInTable:function(){var t=ge();return this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t))},refresh:function(t){var n,i=this,o=i.dataSource.view(),r=i.options.navigatable,s=e(i.current()),a=!1,l=(i.dataSource.group()||[]).length,c=i.content&&i.content.scrollLeft(),h=l+F(p(i.columns)).length;t&&"itemchange"===t.action&&i.editable||(t=t||{},i.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(i._angularItems("cleanup"),r&&(i._isActiveInTable()||i._editContainer&&i._editContainer.data("kendoWindow"))&&(a=s.is("th"),n=Math.max(i.cellIndex(s),0)),i._destroyEditable(),i._progress(!1),i._hideResizeHandle(),i._data=[],i.columns.length||(i._autoColumns(i._firstDataItem(o[0],l)),h=l+i.columns.length),i._group=l>0||i._group,i._group&&(i._templates(),i._updateCols(),i._updateLockedCols(),i._updateHeader(l),i._group=l>0),i._renderContent(o,h,l),i._renderLockedContent(o,h,l),i._footer(),i._renderNoRecordsContent(),i._setContentHeight(),i._setContentWidth(c),i.lockedTable&&(i.options.scrollable.virtual?i.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):i.touchScroller?i.touchScroller.movable.trigger("change"):(i.wrapper.one("scroll",function(e){e.stopPropagation()}),i.content.trigger("scroll"))),i._restoreCurrent(n,a),i.touchScroller&&i.touchScroller.contentResized(),i.selectable&&i.selectable.resetTouchEvents(),i._muteAngularRebind(function(){i._angularItems("compile")}),i.trigger(Ye)))},_restoreCurrent:function(n,i){var o,r,s;n===t||0>n||(this._removeCurrent(),i?this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(n)):(o=0,this._rowVirtualIndex?o=this.virtualScrollable.position(this._rowVirtualIndex):n=0,r=e(),this.lockedTable&&(r=this.lockedTable.find(">tbody>tr").eq(o)),r=r.add(this.tbody.children().eq(o)),s=r.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(n),this._setCurrent(s)),this._current&&re(this._current.closest("table")[0],!0))},_angularItems:function(e){ue.ui.DataBoundWidget.fn._angularItems.call(this,e),"cleanup"===e&&this._cleanupDetailItems(),this._angularGroupItems(e),this._angularGroupFooterItems(e)},_cleanupDetailItems:function(){var e=this;e._hasDetails()&&(e.angular("cleanup",function(){return{elements:e.tbody.children(".k-detail-row")}}),e.tbody.find(".k-detail-cell").empty())},_angularGroupItems:function(t){var n=this,i=n.tbody;n.lockedContent&&(i=n.lockedTable.find("tbody")),n._group&&n.angular(t,function(){return{elements:i.children(".k-grouping-row"),data:e.map(X(n.dataSource.view()),function(e){return{dataItem:e}})}})},_angularGroupFooterItems:function(t){var n=this,i=n.tbody;n.lockedContent&&(i=n.element),n._group&&n.groupFooterTemplate&&n.angular(t,function(){return{elements:i.find(".k-group-footer"),data:e.map(Z(n.dataSource.view()),function(e){return{dataItem:e}})}})},_renderContent:function(e,t,n){var i,o,r=this,s="",a=null!=r.lockedContent,l={rowTemplate:r.rowTemplate,altRowTemplate:r.altRowTemplate,groupFooterTemplate:r.groupFooterTemplate};if(t=a?t-F(L(r.columns)).length:t,n>0)for(t=a?t-n:t,r.detailTemplate&&t++,r.groupFooterTemplate&&(r._groupAggregatesDefaultObject=r.dataSource.aggregates()),i=0,o=e.length;o>i;i++)s+=r._groupRowHtml(e[i],t,0,a?he:ce,l,a);else s+=r._rowsHtml(e,l);r.tbody=U(r.tbody,r.table,s,this.options.$angular)},_renderLockedContent:function(e,t,n){var i,o,r,s="",a={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate};if(this.lockedContent){if(r=this.lockedTable,n>0)for(t-=p(O(B(this.columns))).length,i=0,o=e.length;o>i;i++)s+=this._groupRowHtml(e[i],t,0,ce,a);else s=this._rowsHtml(e,a);U(r.children("tbody"),r,s,this.options.$angular),this._syncLockedContentHeight()}},_adjustRowsHeight:function(e,t){var n,i,o,r,s=e[0].rows,a=s.length,l=t[0].rows,c=e.add(t),h=c.length,u=[];for(n=0;a>n&&l[n];n++)s[n].style.height&&(s[n].style.height=l[n].style.height=""),i=s[n].offsetHeight,o=l[n].offsetHeight,r=0,i>o?r=i:o>i&&(r=o),u.push(r);for(n=0;h>n;n++)c[n].style.display="none";for(n=0;a>n;n++)u[n]&&(s[n].style.height=l[n].style.height=u[n]+1+"px");for(n=0;h>n;n++)c[n].style.display=""}});ue.ExcelMixin&&ue.ExcelMixin.extend(Tt.prototype),ue.PDFMixin&&(ue.PDFMixin.extend(Tt.prototype),Tt.prototype._drawPDF=function(n){function i(){h&&s!==t?(c.unbind("change",o),c.one("change",function(){a.resolve(r)}),c.page(s)):a.resolve(r)}function o(){l._drawPDFShadow({width:l.wrapper.width()},{avoidLinks:l.options.pdf.avoidLinks}).done(function(e){var t=c.page(),o=h?c.totalPages():1,s={page:e,pageNumber:t,progress:t/o,totalPages:o};n.notify(s),r.append(s.page),o>t?c.page(t+1):i()}).fail(function(e){a.reject(e)})}var r,s,a=new e.Deferred,l=this,c=l.dataSource,h=l.options.pdf.allPages;return this._initPDFProgress(n),r=new ue.drawing.Group,s=c.page(),h?(c.bind("change",o),c.page(1)):o(),a.promise()},Tt.prototype._initPDFProgress=function(t){var n,i=e("<div class='k-loading-pdf-mask'><div class='k-loading-color'/></div>");i.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0})),this.wrapper.append(i),n=e("<div class='k-loading-pdf-progress'>").appendTo(i).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar"),t.progress(function(e){n.value(e.progress)}).always(function(){ue.destroy(i),i.remove()})}),de.plugin(Tt),de.plugin(Ct)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});